<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>XPalm.VPalm API · XPalm.jl</title><meta name="title" content="XPalm.VPalm API · XPalm.jl"/><meta property="og:title" content="XPalm.VPalm API · XPalm.jl"/><meta property="twitter:title" content="XPalm.VPalm API · XPalm.jl"/><meta name="description" content="Documentation for XPalm.jl."/><meta property="og:description" content="Documentation for XPalm.jl."/><meta property="twitter:description" content="Documentation for XPalm.jl."/><meta property="og:url" content="https://PalmStudio.github.io/XPalm.jl/vpalm/api/"/><meta property="twitter:url" content="https://PalmStudio.github.io/XPalm.jl/vpalm/api/"/><link rel="canonical" href="https://PalmStudio.github.io/XPalm.jl/vpalm/api/"/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img src="../../assets/logo.jpg" alt="XPalm.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../../">XPalm.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><span class="tocitem">XPalm</span><ul><li><a class="tocitem" href="../../notebook/">XPalm notebook</a></li><li><a class="tocitem" href="../../running/">Running XPalm</a></li></ul></li><li><span class="tocitem">Vpalm</span><ul><li><a class="tocitem" href="../parameters/">Parameters</a></li><li><a class="tocitem" href="../reconstruction/">Reconstruction</a></li></ul></li><li><a class="tocitem" href="../../coupling/">Coupling</a></li><li><span class="tocitem">API</span><ul><li><a class="tocitem" href="../../api_index/">Index</a></li><li><a class="tocitem" href="../../api/">XPalm API</a></li><li class="is-active"><a class="tocitem" href>XPalm.VPalm API</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">API</a></li><li class="is-active"><a href>XPalm.VPalm API</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>XPalm.VPalm API</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/PalmStudio/XPalm.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/PalmStudio/XPalm.jl/blob/main/docs/src/vpalm/api.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="XPalm.VPalm-submodule-API"><a class="docs-heading-anchor" href="#XPalm.VPalm-submodule-API">XPalm.VPalm submodule API</a><a id="XPalm.VPalm-submodule-API-1"></a><a class="docs-heading-anchor-permalink" href="#XPalm.VPalm-submodule-API" title="Permalink"></a></h1><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="XPalm.VPalm.AbstractGeometryModel" href="#XPalm.VPalm.AbstractGeometryModel"><code>XPalm.VPalm.AbstractGeometryModel</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p><code>geometry</code> process abstract model. </p><p>All models implemented to simulate the <code>geometry</code> process must be a subtype of this type, <em>e.g.</em>  <code>struct MyGeometryModel &lt;: AbstractGeometryModel end</code>.</p><p>You can list all models implementing this process using <code>subtypes</code>:</p><p><strong>Examples</strong></p><pre><code class="language-julia hljs">subtypes(AbstractGeometryModel)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/VirtualPlantLab/PlantSimEngine.jl/blob/v0.13.0/src/processes/process_generation.jl#L69-L82">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="XPalm.VPalm.LeafGeometryModel" href="#XPalm.VPalm.LeafGeometryModel"><code>XPalm.VPalm.LeafGeometryModel</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">LeafGeometryModel(;vpalm_parameters, rng=Random.MersenneTwister())</code></pre><p>A PlantSimEngine model that builds the 3D geometry for a leaf, including the petiole, rachis, and leaflets. This model operates at the phytomer scale and modifies the MTG directly.</p><p><strong>Arguments</strong></p><ul><li><code>vpalm_parameters::Dict{String,Any}</code>: VPalm model parameters.</li><li><code>rng::Random.AbstractRNG</code>: Random number generator for stochastic processes.</li></ul><p><strong>Inputs</strong></p><ul><li><code>height_internodes</code>: Internode height (from plantsimengine_status)</li><li><code>radius_internodes</code>: Internode radius (from plantsimengine_status)  </li><li><code>biomass_leaves</code>: Leaf biomass (from plantsimengine_status)</li><li><code>rank_leaves</code>: Leaf rank (from plantsimengine_status)</li></ul><p><strong>Outputs</strong></p><p>This model has no outputs as it modifies the MTG directly by adding geometric properties and child nodes.</p><p><strong>Notes</strong></p><p>The model requires access to the VPalm parameters via the parameters dictionary under the &quot;vpalm&quot; key.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/XPalm.jl/blob/16a455eacaf3eaa48002772d406ebabd309fd607/src/vpalm/plantsimengine_models/LeafGeometryModel.jl#L3-L28">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PlantSimEngine.run!-Tuple{XPalm.VPalm.LeafGeometryModel, Vararg{Any, 5}}" href="#PlantSimEngine.run!-Tuple{XPalm.VPalm.LeafGeometryModel, Vararg{Any, 5}}"><code>PlantSimEngine.run!</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">run!(model, models, status, meteo, constants, node)</code></pre><p>Builds the 3D geometry for a leaf by adding internode properties and creating child nodes for petiole, rachis, and leaflets.</p><p><strong>Arguments</strong></p><ul><li><code>model::LeafGeometryModel</code>: The leaf geometry model</li><li><code>models</code>: A <code>ModelList</code> struct holding the parameters for the model</li><li><code>status</code>: The status of the model with inputs (height, radius, biomass, rank)</li><li><code>meteo</code>: Meteorology structure (not used by this model)</li><li><code>constants</code>: Physical constants (not used by this model)</li><li><code>node</code>: MTG node of the phytomer</li></ul><p><strong>Notes</strong></p><p>The model expects <code>node</code> to be the phytomer MTG node and accesses VPalm parameters from <code>model.vpalm_parameters</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/XPalm.jl/blob/16a455eacaf3eaa48002772d406ebabd309fd607/src/vpalm/plantsimengine_models/LeafGeometryModel.jl#L57-L75">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="XPalm.VPalm.add_geometry!-NTuple{4, Any}" href="#XPalm.VPalm.add_geometry!-NTuple{4, Any}"><code>XPalm.VPalm.add_geometry!</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">add_geometry!(
    mtg, refmesh_cylinder, refmesh_snag, ref_mesh_plane;
    snag_width=0.20u&quot;m&quot;, # see defaultOrthotropyAttribute in the trunk in the java implementation
    snag_height=0.15u&quot;m&quot;,
    snag_length=3.0u&quot;m&quot;,
)</code></pre><p>Adds geometry to the MTG (Multiscale Tree Graph) for the oil palm plant architecture, i.e. compute the meshes.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/XPalm.jl/blob/16a455eacaf3eaa48002772d406ebabd309fd607/src/vpalm/geometry/add_geometry.jl#L1-L10">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="XPalm.VPalm.add_leaflet_geometry!-NTuple{8, Any}" href="#XPalm.VPalm.add_leaflet_geometry!-NTuple{8, Any}"><code>XPalm.VPalm.add_leaflet_geometry!</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">add_leaflet_geometry!(
    leaflet_node, 
    rachis_position, 
    rachis_orientation, 
    rachis_rotation, 
    stem_bending, 
    refmesh_plane
)</code></pre><p>Create the leaflet geometry based on its segments.</p><p><strong>Arguments</strong></p><ul><li><code>leaflet_node</code>: The MTG node of the leaflet</li><li><code>rachis_position</code>: Position of the rachis section where the leaflet is attached</li><li><code>rachis_orientation</code>: Orientation angles [zenithal, azimuthal, torsion] of the rachis section</li><li><code>rachis_rotation</code>: Rotation of the rachis due to phyllotaxy (radians)</li><li><code>stem_bending</code>: Bending of the stem (radians)</li><li><code>refmesh_plane</code>: Reference mesh used for the planar leaflet segments</li></ul><p><strong>Returns</strong></p><ul><li>Nothing (the geometry is added directly to the leaflet node and its segments)</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/XPalm.jl/blob/16a455eacaf3eaa48002772d406ebabd309fd607/src/vpalm/geometry/leaflets.jl#L1-L23">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="XPalm.VPalm.add_section_geometry!" href="#XPalm.VPalm.add_section_geometry!"><code>XPalm.VPalm.add_section_geometry!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">add_section_geometry!(
    node, internode_width, internode_height, internode_phyllotaxy, stem_bending, 
    refmesh_cylinder, position_section=Ref(Meshes.Point(0.0, 0.0, 0.0)), angles=[0.0, 0.0, 0.0],
    type::String,
)</code></pre><p>Create the petiole/rachis sections geometry based on their dimensions.</p><p><strong>Arguments</strong></p><ul><li><code>node</code>: the MTG node of the petiole/rachis</li><li><code>refmesh_cylinder</code>: the reference mesh used for a cylinder (<code>PlantGeom.RefMesh</code>)</li><li><code>internode_width</code>: the width of the internode on the stipe (m)</li><li><code>internode_height</code>: the height of the internode on the stipe (m)</li><li><code>internode_phyllotaxy</code>: the phyllotaxy of the internode on the stipe (°)</li><li><code>stem_bending</code>: the bending of the stipe (°)</li><li><code>type::String</code>: the type of the section (<code>&quot;PetioleSegment&quot;</code> or <code>&quot;RachisSegment&quot;</code>)</li><li><code>position_section=Ref(Meshes.Point(0.0, 0.0, 0.0))</code>: the position of the section relative to the first one.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/XPalm.jl/blob/16a455eacaf3eaa48002772d406ebabd309fd607/src/vpalm/geometry/sections.jl#L1-L20">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="XPalm.VPalm.bend-NTuple{16, Any}" href="#XPalm.VPalm.bend-NTuple{16, Any}"><code>XPalm.VPalm.bend</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">bend(
    type, width_bend, height_bend, init_torsion, x, y, z, mass_rachis, mass_leaflets_right, mass_leaflets_left,
    distance_application, elastic_modulus, shear_modulus, step, npoints, nsegments;
    all_points=false,
    angle_max=deg2rad(21),
    force=true,
    verbose=true
)</code></pre><p>Compute the deformation of the rachis by applying both bending and torsion.</p><p><strong>Arguments</strong></p><ul><li><code>type</code>: Vector of section types (1: triangle bottom, 2: rectangle, 3: triangle top, 4: ellipse, 5: circle).</li><li><code>width_bend</code>: Vector of segment section widths (m).</li><li><code>height_bend</code>: Vector of segment section heights (m).</li><li><code>init_torsion</code>: Vector of initial torsion angles (degrees).</li><li><code>x</code>: Vector of x coordinates of the segments.</li><li><code>y</code>: Vector of y coordinates of the segments.</li><li><code>z</code>: Vector of z coordinates of the segments.</li><li><code>mass_rachis</code>: Vector of rachis segment masses (kg).</li><li><code>mass_leaflets_right</code>: Vector of leaflet masses carried by the segment, on the right side (kg).</li><li><code>mass_leaflets_left</code>: Vector of leaflet masses carried by the segment, on the left side (kg).</li><li><code>distance_application</code>: Vector of application distances for the left and right weights (m).</li><li><code>elastic_modulus</code>: Vector of elasticity moduli (bending, MPa).</li><li><code>shear_modulus</code>: Vector of shear moduli (torsion, MPa).</li><li><code>step</code>: Length of the segments that discretize the object (m).</li><li><code>npoints</code>: Number of points used in the grid discretizing the section.</li><li><code>nsegments</code>: Number of segments dividing the rachis to compute the torsion and bending.</li><li><code>all_points=false</code>: return all points used in the computation (<code>true</code>), or only the input points corresponding to x, y and z coordinates (<code>false</code>, default).</li><li><code>angle_max=deg2rad(21)</code>: Maximum angle for testing the small displacement hypothesis (radians).</li><li><code>force=true</code>: Check if verify the small displacements hypothesis and bounds the values to be at maximum <code>angle_max</code></li><li><code>verbose=true</code>: Provide information during computation.</li></ul><p><strong>Returns</strong></p><p>Named tuple with geometrical fields describing the rachis bended and with torsion applied</p><ul><li><code>x</code>: x coordinates of the points.</li><li><code>y</code>: y coordinates of the points.</li><li><code>z</code>: z coordinates of the points.</li><li><code>length</code>: length of the segments.</li><li><code>angle_xy</code>: angle between the xy-plan and the segment.</li><li><code>angle_xz</code>: angle between the xz-plan and the segment.</li><li><code>torsion</code>: torsion angle of the segment.</li></ul><p>All these fields are vectors of the same length as the input vectors (i.e. number of segments).</p><p><strong>Details</strong></p><p>The bending and torsion are applied to the sections of the rachis defined by 5 segments.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/XPalm.jl/blob/16a455eacaf3eaa48002772d406ebabd309fd607/src/vpalm/biomechanics/complete/bend.jl#L1-L49">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="XPalm.VPalm.beta_distribution_norm-Tuple{Any, Any, Any}" href="#XPalm.VPalm.beta_distribution_norm-Tuple{Any, Any, Any}"><code>XPalm.VPalm.beta_distribution_norm</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">beta_distribution_norm(x, xm, ym)</code></pre><p>Calculate the normalized beta distribution value at point x. This is the exact implementation from the Java version.</p><p><strong>Arguments</strong></p><ul><li><code>x</code>: Position [0 to 1].</li><li><code>xm</code>: Mode of the beta distribution.</li><li><code>ym</code>: Maximum value of the beta distribution.</li></ul><p><strong>Returns</strong></p><ul><li>Normalized beta distribution value.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/XPalm.jl/blob/16a455eacaf3eaa48002772d406ebabd309fd607/src/vpalm/utils.jl#L112-L125">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="XPalm.VPalm.beta_distribution_norm_integral-Tuple{Any, Any}" href="#XPalm.VPalm.beta_distribution_norm_integral-Tuple{Any, Any}"><code>XPalm.VPalm.beta_distribution_norm_integral</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">beta_distribution_norm_integral(xm, ym)</code></pre><p>Calculate the integral (area) of the normalized beta distribution. Equivalent to betaDistributionNormIntegral in the Java version.</p><p><strong>Arguments</strong></p><ul><li><code>xm</code>: Mode of the beta distribution.</li><li><code>ym</code>: Value of the function at the mode.</li></ul><p><strong>Returns</strong></p><ul><li>Approximate area under the beta distribution curve.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/XPalm.jl/blob/16a455eacaf3eaa48002772d406ebabd309fd607/src/vpalm/utils.jl#L138-L150">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="XPalm.VPalm.biomechanical_properties_rachis-NTuple{21, Any}" href="#XPalm.VPalm.biomechanical_properties_rachis-NTuple{21, Any}"><code>XPalm.VPalm.biomechanical_properties_rachis</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">biomechanical_properties_rachis(
    rachis_twist_initial_angle, rachis_twist_initial_angle_sdp,
    elastic_modulus, shear_modulus, rachis_length,
    leaflet_length_at_b_intercept, leaflet_length_at_b_slope, relative_position_bpoint,
    relative_position_bpoint_sd, relative_length_first_leaflet, relative_length_last_leaflet, relative_position_leaflet_max_length,
    rachis_fresh_weight, rank, height_cpoint, zenithal_cpoint_angle, nb_sections,
    height_rachis_tappering,
    points, iterations, angle_max;
    verbose, rng
)</code></pre><p>Use of the biomechanical model to compute the properties of the rachis.</p><p><strong>Arguments</strong></p><ul><li><code>rachis_twist_initial_angle</code>: initial twist angle of the rachis (°)</li><li><code>rachis_twist_initial_angle_sdp</code>: standard deviation of the initial twist angle of the rachis (°)</li><li><code>elastic_modulus</code>: elastic modulus of the rachis (Pa)</li><li><code>shear_modulus</code>: shear modulus of the rachis (Pa)</li><li><code>rachis_length</code>: length of the rachis (m)</li><li><code>leaflet_length_at_b_intercept</code>: intercept of the linear function for the leaflet length at the B point (m)</li><li><code>leaflet_length_at_b_slope</code>: slope of the linear function for the leaflet length at the B point (m)</li><li><code>relative_position_bpoint</code>: relative position of the B point on the rachis (0: base to 1: tip)</li><li><code>relative_position_bpoint_sd</code>: standard deviation of the relative position of the B point on the rachis</li><li><code>relative_length_first_leaflet</code>: relative length of the first leaflet on the rachis (0 to 1)</li><li><code>relative_length_last_leaflet</code>: relative length of the last leaflet on the rachis (0 to 1)</li><li><code>relative_position_leaflet_max_length</code>: relative position of the longest leaflet on the rachis (0.111 to 0.999)</li><li><code>rachis_fresh_weight</code>: fresh weight of the rachis (kg)</li><li><code>rank</code>: rank of the rachis</li><li><code>height_cpoint</code>: height of the C point (m)</li><li><code>zenithal_cpoint_angle</code>: zenithal angle of the C point (°)</li><li><code>nb_sections</code>: number of sections to compute the bending</li><li><code>height_rachis_tappering</code>: tappering factor for the rachis height</li><li><code>npoints_computed</code>: number of points to compute the bending</li><li><code>iterations</code>: number of iterations to compute the bending</li><li><code>angle_max</code>: maximum angle to compute the bending (°)</li><li><code>verbose</code>: display information about the computation (e.g. checks on the units)</li><li><code>rng</code>: the random number generator</li></ul><p><strong>Returns</strong></p><p>A named tuple with the following fields:</p><ul><li><code>length</code>: vector with the length of each segment</li><li><code>points_positions</code>: the position of the points along the rachis</li><li><code>bending</code>: the bending angle of the rachis</li><li><code>deviation</code>: the deviation of the rachis (angle in the xz plane)</li><li><code>torsion</code>: the torsion of the rachis</li><li><code>x</code>: the x coordinates of the rachis</li><li><code>y</code>: the y coordinates of the rachis</li><li><code>z</code>: the z coordinates of the rachis</li></ul><p><strong>Details</strong></p><p>Split the rachis into 5 segments defined by remarkable points (C, C-B, B, B-A, A). Each segment has a particular shape, a mass, and the leaflets on both sides of the rachis have a mass. Coefficents are used to compute the mass distribution and relative lengths of segments. The rachis is bent using the <code>bend</code> function.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/XPalm.jl/blob/16a455eacaf3eaa48002772d406ebabd309fd607/src/vpalm/architecture/compute_properties_rachis.jl#L1-L56">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="XPalm.VPalm.build_mockup-Tuple{Any}" href="#XPalm.VPalm.build_mockup-Tuple{Any}"><code>XPalm.VPalm.build_mockup</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">build_mockup(parameters; merge_scale=:leaflet)</code></pre><p>Construct a mockup of an oil palm plant architecture using the specified parameters.</p><p><strong>Arguments</strong></p><ul><li><code>parameters::Dict</code>: Dictionary containing model parameters for the oil palm plant architecture. </li><li><code>merge_scale::Symbol</code>: (optional) The scale at which to merge geometry.<ul><li><code>:node</code>: Geometry is not merged, each node has its own mesh (finer scale is leaflet segments).</li><li><code>:leaflet</code> (default): Geometry is merged at the leaflet level.</li><li><code>:leaf</code>: All geometry for a leaf is merged into a single mesh.</li><li><code>:plant</code>: All plant geometry is merged into a single mesh.</li></ul></li></ul><p><strong>Description</strong></p><p>The <code>merge_scale</code> argument controls how the geometry is structured within the Multiscale Tree Graph (MTG). The resulting mesh is identical in all cases, but its organization differs.</p><ul><li>Using <code>:leaflet</code> retains the finest detail, with each leaflet having its own mesh. This is best for analyses like light interception at the organ level.</li><li>Using <code>:leaf</code> or <code>:plant</code> merges geometry into larger components. A single mesh for the whole plant (<code>:plant</code>) is the most performant for rendering, but it prevents querying information for individual organs from the mesh (e.g., which part of the mesh is a given leaflet).</li></ul><p><strong>Returns</strong></p><ul><li><code>mtg</code>: An MTG (Multiscale Tree Graph) representing the oil palm plant architecture, including geometry at the specified merge scale.</li></ul><p><strong>Example</strong></p><pre><code class="language-julia hljs">using VPalm
file = joinpath(dirname(dirname(pathof(VPalm))), &quot;test&quot;, &quot;files&quot;, &quot;parameter_file.yml&quot;)
parameters = read_parameters(file)
mtg = build_mockup(parameters; merge_scale=:plant)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/XPalm.jl/blob/16a455eacaf3eaa48002772d406ebabd309fd607/src/vpalm/build_mockup.jl#L1-L34">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="XPalm.VPalm.c_point_angle-NTuple{4, Any}" href="#XPalm.VPalm.c_point_angle-NTuple{4, Any}"><code>XPalm.VPalm.c_point_angle</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">c_point_angle(leaf_rank, cpoint_decli_intercept, cpoint_decli_slope, cpoint_angle_SDP; rng)</code></pre><p>Compute the angle at the C point of the leaf.</p><p><strong>Arguments</strong></p><ul><li><code>leaf_rank</code>: Rank of the leaf</li><li><code>cpoint_decli_intercept</code>: Intercept of the linear relationship between leaf rank and C point declination</li><li><code>cpoint_decli_slope</code>: Slope of the linear relationship</li><li><code>cpoint_angle_SDP</code>: Standard deviation of the C point angle</li><li><code>rng</code>: Random number generator</li></ul><p><strong>Returns</strong></p><p>The zenithal angle at the C point of the leaf (°)</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/XPalm.jl/blob/16a455eacaf3eaa48002772d406ebabd309fd607/src/vpalm/allometries/petiole.jl#L82-L98">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="XPalm.VPalm.calculate_segment" href="#XPalm.VPalm.calculate_segment"><code>XPalm.VPalm.calculate_segment</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">calculate_segment(relative_position, num_segments=10)</code></pre><p>Calculate the segment index for a given relative position along the rachis.</p><p><strong>Arguments</strong></p><ul><li><code>relative_position</code>: Relative position along the rachis [0 to 1), where 0 is the base and 1 is the tip.</li><li><code>num_segments</code>: Number of segments the rachis is divided into (default: 10).</li></ul><p><strong>Details</strong></p><p>We divide the rachis into segments to capture variations in properties along its length. This function:</p><ol><li>Converts a continuous relative position (0-1) into a discrete segment index</li><li>Ensures the segment index is within valid bounds (1 to num_segments)</li></ol><p><strong>Biological Context</strong></p><p>The palm rachis exhibits changing properties along its length, including:</p><ul><li>Leaflet grouping patterns</li><li>Leaflet sizes and angles</li></ul><p>Dividing the rachis into discrete segments allows the model to represent these gradual changes in a computationally efficient manner. Each segment can have different parameter values that together create the characteristic patterns seen in real palms.</p><p><strong>Returns</strong></p><p>The segment index (starts at 1 in Julia).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/XPalm.jl/blob/16a455eacaf3eaa48002772d406ebabd309fd607/src/vpalm/instance/leaflets.jl#L682-L713">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="XPalm.VPalm.calculate_segment_angles-NTuple{5, Any}" href="#XPalm.VPalm.calculate_segment_angles-NTuple{5, Any}"><code>XPalm.VPalm.calculate_segment_angles</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">calculate_segment_angles(young_modulus, initial_angle, leaflet_length, tapering, segment_positions)</code></pre><p>Calculate the global angles for each segment of a bent leaflet based on the Young&#39;s modulus model.</p><p><strong>Arguments</strong></p><ul><li><code>young_modulus</code>: Value of Young&#39;s modulus</li><li><code>initial_angle</code>: Initial angle from vertical in radians</li><li><code>leaflet_length</code>: Total length of the leaflet</li><li><code>tapering</code>: Tapering factor</li><li><code>segment_positions</code>: Array of segment boundary positions (normalized 0-1)</li></ul><p><strong>Returns</strong></p><ul><li>Array of segment angles in radians</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/XPalm.jl/blob/16a455eacaf3eaa48002772d406ebabd309fd607/src/vpalm/biomechanics/simplified/young_modulus.jl#L94-L110">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="XPalm.VPalm.compute_leaf_rank" href="#XPalm.VPalm.compute_leaf_rank"><code>XPalm.VPalm.compute_leaf_rank</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">compute_leaf_rank(nb_internodes, index_leaf)</code></pre><p>Compute the rank of a leaf based on the total number of internodes and the index of the leaf.</p><p><strong>Arguments</strong></p><ul><li><code>nb_internodes</code>: The total number of internodes until leaf of rank 1.</li><li><code>index_leaf</code>: The index of the leaf.</li><li><code>leaves_in_sheath</code>: The number of leaves in the sheath, i.e. with rank &lt; 1 (default is 0).</li></ul><p><strong>Note</strong></p><p>This is a simple leaf rank, not considering the leaves of rank &lt;= 0.</p><p><strong>Returns</strong></p><p>The leaf rank, i.e. 1 for the first opened leaf, 2 for the second leaf, etc.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/XPalm.jl/blob/16a455eacaf3eaa48002772d406ebabd309fd607/src/vpalm/architecture/leaf_rank.jl#L1-L19">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="XPalm.VPalm.compute_leaflet_type_frequencies-Tuple{Any, Any}" href="#XPalm.VPalm.compute_leaflet_type_frequencies-Tuple{Any, Any}"><code>XPalm.VPalm.compute_leaflet_type_frequencies</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">compute_leaflet_type_frequencies(leaflet_frequency_high, leaflet_frequency_low)</code></pre><p>Compute the frequency of leaflet type within the sub-sections of a rachis.</p><p><strong>Arguments</strong></p><ul><li><code>leaflet_frequency_high</code>: Vector of frequency values for the +1 leaflet types (high) along the rachis sub-sections.</li><li><code>leaflet_frequency_low</code>: Vector of frequency values for the -1 leaflet types (low) along the rachis sub-sections..</li></ul><p>Note that the length of the two vectors must be the same. It will define how many sub-sections the rachis is divided into for this computation.</p><p><strong>Returns</strong></p><p>A vector of NamedTuples representing the <code>(;high, medium, low)</code> frequencies for each sub-section.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/XPalm.jl/blob/16a455eacaf3eaa48002772d406ebabd309fd607/src/vpalm/instance/leaflets.jl#L780-L796">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="XPalm.VPalm.compute_number_of_leaflets-NTuple{6, Any}" href="#XPalm.VPalm.compute_number_of_leaflets-NTuple{6, Any}"><code>XPalm.VPalm.compute_number_of_leaflets</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">compute_number_of_leaflets(rachis_final_length, nb_max, nb_slope, nb_infl, nbLeaflets_SDP; rng)</code></pre><p>Compute the number of leaflets based on the logistic function, a standard deviation and a minimum value allowed.</p><p><strong>Arguments</strong></p><ul><li><code>rachis_final_length</code>: Final length of the rachis (m).</li><li><code>nb_max</code>: Maximum number of leaflets.</li><li><code>nb_min</code>: Minimum number of leaflets.</li><li><code>nb_slope</code>: Slope parameter for the logistic function (leaflet m⁻¹).</li><li><code>nb_infl</code>: Inflection point parameter for the logistic function (m).</li><li><code>nbLeaflets_SDP</code>: Standard deviation of the normal distribution for the number of leaflets.</li><li><code>rng</code>: Random number generator.</li></ul><p><strong>Returns</strong></p><p>The computed number of leaflets (integer).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/XPalm.jl/blob/16a455eacaf3eaa48002772d406ebabd309fd607/src/vpalm/instance/leaflets.jl#L725-L743">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="XPalm.VPalm.compute_properties_internode!-NTuple{8, Any}" href="#XPalm.VPalm.compute_properties_internode!-NTuple{8, Any}"><code>XPalm.VPalm.compute_properties_internode!</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">compute_properties_internode!(node, index, nb_internodes, rank, stem_height, stem_diameter, parameters, rng)</code></pre><p>Computes the mtg properties of an internode.</p><p><strong>Arguments</strong></p><ul><li><code>node</code>: the internode node</li><li><code>index</code>: the index of the internode</li><li><code>nb_internodes</code>: the total number of internodes</li><li><code>rank</code>: the rank of the internode</li><li><code>stem_height</code>: the height of the stem (m)</li><li><code>stem_diameter</code>: the diameter of the stem (m)</li><li><code>parameters</code>: the parameters of the model</li><li><code>rng</code>: the random number generator</li></ul><p><strong>Returns</strong></p><p>The internode node updated with properties.</p><p><strong>Details</strong></p><p>The internode dimensions are computed based on the dimensions of the stem and the parameters of the model:</p><ul><li>width: width of the internode (m)</li><li>diameter: diameter of the internode (m)</li><li>length: length of the internode (m)</li><li>rank: rank of the internode</li><li>Orthotropy: orthotropy of the internode (set as a constant value)</li><li>XEuler: Euler / phyllotactic angle of the internode (rad)</li></ul><p><strong>Examples</strong></p><pre><code class="language-julia hljs">using XPalm.VPalm
using Unitful

parameters = VPalm.default_parameters()
nb_internodes = parameters[&quot;nb_leaves_emitted&quot;] + parameters[&quot;nb_internodes_before_planting&quot;] # The number of internodes emitted since the seed
# Plant / Scale 1
plant = Node(NodeMTG(&quot;/&quot;, &quot;Plant&quot;, 1, 1))
# Stem (&amp; Roots) / Scale 2
stem = Node(plant, NodeMTG(&quot;+&quot;, &quot;Stem&quot;, 1, 2))
compute_properties_stem!(stem, parameters, 3.0u&quot;m&quot;; rng=rng)
stem_height = stem[:stem_height]
stem_diameter = stem[:stem_diameter]
# Phytomer / Scale 3
phytomer = Node(stem, NodeMTG(&quot;/&quot;, &quot;Phytomer&quot;, 1, 3))
# Internode &amp; Leaf / Scale 4
internode = Node(phytomer, NodeMTG(&quot;/&quot;, &quot;Internode&quot;, 1, 4))
compute_properties_internode!(internode, 1, nb_internodes, stem_height, stem_diameter, parameters, rng)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/XPalm.jl/blob/16a455eacaf3eaa48002772d406ebabd309fd607/src/vpalm/architecture/compute_properties_internode.jl#L1-L52">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="XPalm.VPalm.compute_properties_leaf!-NTuple{5, Any}" href="#XPalm.VPalm.compute_properties_leaf!-NTuple{5, Any}"><code>XPalm.VPalm.compute_properties_leaf!</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">compute_properties_leaf!(node, leaf_rank, final_length, parameters, rng)</code></pre><p>Compute the properties of a leaf node:</p><ul><li>zenithal<em>insertion</em>angle: the zenithal insertion angle of the leaf (rad)</li><li>rachis_length: the length of the rachis (m)</li><li>zenithal<em>cpoint</em>angle: the zenithal angle at C-point (rad)</li></ul><p><strong>Arguments</strong></p><ul><li><code>node</code>: the leaf node</li><li><code>leaf_rank</code>: the rank of the leaf</li><li><code>final_length</code>: the final length of the leaf (m)</li><li><code>parameters</code>: the parameters of the model</li><li><code>rng</code>: the random number generator</li></ul><p><strong>Returns</strong></p><p>The leaf node updated with properties.</p><p><strong>Details</strong></p><p>The leaf dimensions are computed based on the dimensions of the stem and the parameters of the model:</p><ul><li>zenithal<em>insertion</em>angle: the zenithal insertion angle of the leaf (rad). Uses the <code>VPalm.leaf_insertion_angle</code> function.</li><li>rachis<em>length: the length of the rachis (m). Uses the `rachis</em>expansion` function.</li><li>zenithal<em>cpoint</em>angle: the zenithal angle at C-point (rad). Uses the <code>c_point_angle</code> function.</li></ul><p><strong>Examples</strong></p><pre><code class="language-julia hljs">using XPalm.VPalm
using Unitful

file = joinpath(dirname(dirname(pathof(VPalm))), &quot;test&quot;, &quot;files&quot;, &quot;parameter_file.yml&quot;)
parameters = read_parameters(file)
nb_internodes = parameters[&quot;nb_leaves_emitted&quot;] + parameters[&quot;nb_internodes_before_planting&quot;] # The number of internodes emitted since the seed
nb_leaves_alive = floor(Int, mean_and_sd(parameters[&quot;nb_leaves_mean&quot;], parameters[&quot;nb_leaves_sd&quot;]; rng=rng))
nb_leaves_alive = min(nb_leaves_alive, nb_internodes)
# Plant / Scale 1
plant = Node(NodeMTG(&quot;/&quot;, &quot;Plant&quot;, 1, 1))
# Stem (&amp; Roots) / Scale 2
stem = Node(plant, NodeMTG(&quot;+&quot;, &quot;Stem&quot;, 1, 2))
compute_properties_stem!(stem, parameters, 3.0u&quot;m&quot;; rng=rng)
stem_height = stem[:stem_height]
stem_diameter = stem[:stem_diameter]
# Phytomer / Scale 3
phytomer = Node(stem, NodeMTG(&quot;/&quot;, &quot;Phytomer&quot;, 1, 3))
# Internode &amp; Leaf / Scale 4
internode = Node(phytomer, NodeMTG(&quot;/&quot;, &quot;Internode&quot;, 1, 4))
leaf = Node(internode, NodeMTG(&quot;+&quot;, &quot;Leaf&quot;, 1, 4))
compute_properties_leaf!(leaf, 1, nb_internodes, nb_leaves_alive, parameters, rng)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/XPalm.jl/blob/16a455eacaf3eaa48002772d406ebabd309fd607/src/vpalm/architecture/compute_properties_leaf.jl#L1-L53">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="XPalm.VPalm.compute_properties_petiole!-NTuple{12, Any}" href="#XPalm.VPalm.compute_properties_petiole!-NTuple{12, Any}"><code>XPalm.VPalm.compute_properties_petiole!</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">compute_properties_petiole!(
    petiole_node,
    insertion_angle, rachis_length, zenithal_cpoint_angle,
    width_base, height_base, cpoint_width_intercept,
    cpoint_width_slope, cpoint_height_width_ratio,
    petiole_rachis_ratio_mean,
    petiole_rachis_ratio_sd, nb_sections;
    rng=Random.MersenneTwister(1)
)</code></pre><p>Compute the dimensional properties of a petiole.</p><p><strong>Arguments</strong></p><ul><li><code>petiole_node</code>: the MTG Node of the petiole</li><li><code>insertion_angle</code>: the angle of insertion of the petiole on the stem (°)</li><li><code>rachis_length</code>: the length of the rachis (m)</li><li><code>zenithal_cpoint_angle</code>: the zenithal angle of the C point of the petiole, <em>i.e.</em> the tip (°)</li><li><code>width_base</code>: the width of the petiole at its base (m)</li><li><code>height_base</code>: the height of the petiole at its base (m)</li><li><code>cpoint_width_intercept</code>: the intercept of the linear function for the width at the C point (m)</li><li><code>cpoint_width_slope</code>: the slope of the linear function for the width at the C point</li><li><code>cpoint_height_width_ratio</code>: the ratio of the height to width at the C point</li><li><code>petiole_rachis_ratio_mean</code>: the mean ratio of the petiole to rachis length</li><li><code>petiole_rachis_ratio_sd</code>: the standard deviation of the ratio of the petiole to rachis length</li><li><code>nb_sections</code>: the number of sections discretizing the petiole</li><li><code>rng=Random.MersenneTwister(1)</code>: the random number generator</li></ul><p><strong>Returns</strong></p><p>The petiole node updated with properties.</p><p><strong>Details</strong></p><p>Properties are computed based on the allometries of the petiole and the rachis:</p><ul><li>length: the length of the petiole (m)</li><li>azimuthal_angle: the azimuthal angle of the petiole (°)</li><li>width_base: the width of the petiole at its base (m)</li><li>height_base: the height of the petiole at its base (m)</li><li>width_cpoint: the width of the petiole at the C point (m)</li><li>height_cpoint: the height of the petiole at the C point (m)</li><li>zenithal<em>insertion</em>angle: the zenithal angle of insertion of the petiole on the stem (°)</li><li>zenithal<em>cpoint</em>angle: the zenithal angle of the C point of the petiole (°)</li><li>section_length: the length of the petiole sections (m)</li><li>section<em>insertion</em>angle: the zenithal angle of insertion between the petioles sections (°)</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/XPalm.jl/blob/16a455eacaf3eaa48002772d406ebabd309fd607/src/vpalm/architecture/compute_properties_petiole.jl#L1-L46">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="XPalm.VPalm.compute_properties_petiole_section!-NTuple{5, Any}" href="#XPalm.VPalm.compute_properties_petiole_section!-NTuple{5, Any}"><code>XPalm.VPalm.compute_properties_petiole_section!</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">compute_properties_petiole_section!(petiole_node, section_node, index, nb_sections)</code></pre><p>Compute the dimension of a petiole section based on the dimensions of the petiole.</p><p><strong>Arguments</strong></p><ul><li><code>petiole_node</code>: the MTG Node of the petiole</li><li><code>section_node</code>: the MTG Node of the section to be computed</li><li><code>index</code>: the index of the section on the petiole, from 1 at the base to <code>nb_sections</code>.</li><li><code>nb_sections</code>: the number of sections discretizing the petiole</li><li><code>section_insertion_angle</code>: the zenithal angle of the petioles sections (global angle, °)</li></ul><p><strong>Returns</strong></p><p>The section node updated with dimensional properties.</p><p><strong>Details</strong></p><p>The <code>petiole_node</code> should have the following attributes:</p><ul><li><code>width_base</code>: the width of the petiole at its base (m)</li><li><code>height_base</code>: the height of the petiole at its base (m)</li><li><code>width_cpoint</code>: the width of the petiole at the C point (m)</li><li><code>height_cpoint</code>: the height of the petiole at the C point (m)</li><li><code>section_length</code>: the length of the petiole sections (m)</li><li><code>insertion_angle</code>: the angle of insertion of the petiole on the stem (°)</li><li><code>section_insertion_angle</code>: the zenithal angle of insertion between the petioles sections (°)</li><li><code>azimuthal_angle</code>: the azimuthal angle at the insertion (°)</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/XPalm.jl/blob/16a455eacaf3eaa48002772d406ebabd309fd607/src/vpalm/architecture/compute_properties_petiole.jl#L76-L103">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="XPalm.VPalm.compute_properties_stem!-Tuple{Any, Any, Any}" href="#XPalm.VPalm.compute_properties_stem!-Tuple{Any, Any, Any}"><code>XPalm.VPalm.compute_properties_stem!</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">compute_properties_stem!(node, parameters, length_reference_leaf; rng=MersenneTwister(1234))</code></pre><p>Compute the properties of the stem node.</p><p><strong>Arguments</strong></p><ul><li><code>node</code>: the stem node</li><li><code>parameters</code>: the parameters of the Vpalm model</li><li><code>length_reference_leaf</code>: the length of the reference leaf (usually, rank 17)</li><li><code>rng=MersenneTwister(1234)</code>: the random number generator</li></ul><p><strong>Returns</strong></p><p>The stem node updated with properties.</p><p><strong>Details</strong></p><p>The stem dimensions are computed based on the parameters of the model:</p><ul><li>stem<em>bending: the bending of the stem. Uses the `VPalm.stem</em>bending` function.</li><li>stem<em>height: the height of the stem. Uses the `VPalm.stem</em>height` function.</li><li>stem<em>diameter: the diameter of the stem. Uses the `VPalm.stem</em>diameter` function.</li></ul><p><strong>Examples</strong></p><pre><code class="language-julia hljs">using XPalm.VPalm
using Unitful

file = joinpath(dirname(dirname(pathof(VPalm))), &quot;test&quot;, &quot;references&quot;, &quot;vpalm-parameter_file.yml&quot;)
parameters = read_parameters(file)
nb_internodes = parameters[&quot;nb_leaves_emitted&quot;] + parameters[&quot;nb_internodes_before_planting&quot;] # The number of internodes emitted since the seed
nb_leaves_alive = floor(Int, mean_and_sd(parameters[&quot;nb_leaves_mean&quot;], parameters[&quot;nb_leaves_sd&quot;]; rng=rng))
nb_leaves_alive = min(nb_leaves_alive, nb_internodes)
# Plant / Scale 1
plant = Node(NodeMTG(&quot;/&quot;, &quot;Plant&quot;, 1, 1))
# Stem (&amp; Roots) / Scale 2
stem = Node(plant, NodeMTG(&quot;+&quot;, &quot;Stem&quot;, 1, 2))
compute_properties_stem!(stem, parameters, 3.0u&quot;m&quot;; rng=rng)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/XPalm.jl/blob/16a455eacaf3eaa48002772d406ebabd309fd607/src/vpalm/architecture/compute_properties_stem.jl#L1-L38">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="XPalm.VPalm.create_leaflet_segments!-NTuple{8, Any}" href="#XPalm.VPalm.create_leaflet_segments!-NTuple{8, Any}"><code>XPalm.VPalm.create_leaflet_segments!</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">create_leaflet_segments!(
    unique_mtg_id,
    leaflet_node,
    scale,
    leaflet_length,
    width_max,
    stiffness,
    tapering,
    leaflet_relative_pos;
    xm_intercept, xm_slope,
    ym_intercept, ym_slope  
)</code></pre><p>Create the segments that make up a leaflet with proper shape and bending properties.</p><p><strong>Arguments</strong></p><ul><li><code>unique_mtg_id</code>: Reference to the unique ID counter</li><li><code>leaflet_node</code>: Parent leaflet node</li><li><code>scale</code>: MTG scale for the segments</li><li><code>leaflet_length</code>: Total length of the leaflet in meters</li><li><code>width_max</code>: Maximum width of the leaflet in meters</li><li><code>stiffness</code>: Stiffness value (Young&#39;s modulus) for biomechanical bending</li><li><code>tapering</code>: Tapering factor (how width decreases along length)</li><li><code>leaflet_relative_pos</code>: Relative position of the leaflet on the rachis (0-1)</li><li><code>xm_intercept</code>, <code>xm_slope</code>: Parameters for defining maximum leaflet width <strong>position</strong></li><li><code>ym_intercept</code>, <code>ym_slope</code>: Parameters for defining maximum leaflet width <strong>value</strong></li></ul><p><strong>Returns</strong></p><p>Nothing (segments are added directly to the leaflet node as children)</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/XPalm.jl/blob/16a455eacaf3eaa48002772d406ebabd309fd607/src/vpalm/instance/leaflets.jl#L278-L310">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="XPalm.VPalm.create_leaflets_for_side!-NTuple{12, Any}" href="#XPalm.VPalm.create_leaflets_for_side!-NTuple{12, Any}"><code>XPalm.VPalm.create_leaflets_for_side!</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">create_leaflets_for_side!(
    unique_mtg_id,
    rachis_node,
    scale,
    leaf_rank,
    rachis_length,
    nb_rachis_sections,
    leaflets_position,
    leaflets,
    leaflet_max_length,
    leaflet_max_width,
    side,
    parameters;
    last_rank_unfolding=2,
    rng=Random.MersenneTwister(1234)
)</code></pre><p>Create leaflets for one side of the palm frond rachis.</p><p><strong>Arguments</strong></p><ul><li><code>unique_mtg_id</code>: Reference to the unique ID counter for MTG nodes</li><li><code>rachis_node</code>: Root node of the rachis</li><li><code>scale</code>: MTG scale for leaflets</li><li><code>leaf_rank</code>: Rank of the leaf (affects unfolding for young fronds)</li><li><code>rachis_length</code>: Total length of the rachis in meters</li><li><code>nb_rachis_sections</code>: Number of segments dividing the rachis</li><li><code>leaflets_position</code>: Array of positions along the rachis for each leaflet</li><li><code>leaflets</code>: NamedTuple with leaflet grouping information (group, group_size, plane)</li><li><code>leaflet_max_length</code>: Maximum length of leaflets (length of the longest leaflet)</li><li><code>leaflet_max_width</code>: Maximum width of leaflets (width of the widest leaflet)</li><li><code>side</code>: Side of rachis (1=right, -1=left)</li><li><code>parameters</code>: Model parameters</li><li><code>last_rank_unfolding=2</code>: Rank at which leaflets are fully unfolded (default is 2)</li><li><code>rng=Random.MersenneTwister(1234)</code>: Random number generator</li></ul><p><strong>Returns</strong></p><p>Nothing (leaflets are attached directly to the rachis node in the MTG structure)</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/XPalm.jl/blob/16a455eacaf3eaa48002772d406ebabd309fd607/src/vpalm/instance/leaflets.jl#L1-L41">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="XPalm.VPalm.create_section-Tuple{Any, Any}" href="#XPalm.VPalm.create_section-Tuple{Any, Any}"><code>XPalm.VPalm.create_section</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">create_section(section, section_type)</code></pre><p>Fill in the matrix according to the section shape.</p><p><strong>Arguments</strong></p><ul><li><code>section</code>: Section matrix.</li><li><code>section_type</code>: Section type (1: triangle bottom, 2: rectangle, 3: triangle top, 4: ellipse, 5: circle).</li></ul><p><strong>Returns</strong></p><ul><li>The filled section matrix with 1s for cells inside the shape and 0s outside.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/XPalm.jl/blob/16a455eacaf3eaa48002772d406ebabd309fd607/src/vpalm/biomechanics/complete/inertia_flex_rota.jl#L84-L95">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="XPalm.VPalm.create_single_leaflet-NTuple{11, Any}" href="#XPalm.VPalm.create_single_leaflet-NTuple{11, Any}"><code>XPalm.VPalm.create_single_leaflet</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">create_single_leaflet(
    unique_mtg_id,
    index,
    scale,
    leaf_rank,
    leaflet_relative_pos,
    norm_leaflet_rank,
    plane,
    side,
    leaflet_max_length,
    leaflet_max_width,
    parameters;
    offset=0.0,
    last_rank_unfolding=2,
    rng=Random.MersenneTwister(1234)
)</code></pre><p>Create a single leaflet with properly computed angles, dimensions and segments.</p><p><strong>Arguments</strong></p><ul><li><code>unique_mtg_id</code>: Reference to the unique ID counter</li><li><code>index</code>: Index for the leaflet node (for identification in MTG)</li><li><code>scale</code>: MTG scale level for the leaflet</li><li><code>leaf_rank</code>: Rank of the leaf (affects unfolding for young leaves)</li><li><code>leaflet_relative_pos</code>: Relative position of leaflet on rachis (0 to 1)</li><li><code>norm_leaflet_rank</code>: Normalized rank of the leaflet (0 to 1)</li><li><code>plane</code>: Plane type of leaflet (1=high/upward, 0=medium/horizontal, -1=low/downward)</li><li><code>side</code>: Side of the leaf (1=right, -1=left)</li><li><code>leaflet_max_length</code>: Maximum leaflet length in meters (length of the longest leaflet)</li><li><code>leaflet_max_width</code>: Maximum leaflet width in meters (width of the widest leaflet)</li><li><code>parameters</code>: Model parameters dictionary</li><li><code>offset</code>: Offset from the start of parent node (when applicable)</li><li><code>last_rank_unfolding</code>: Rank at which leaflets are fully unfolded (default is 2)</li><li><code>rng</code>: Random number generator</li></ul><p><strong>Returns</strong></p><p>The created leaflet node with all its segment children</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/XPalm.jl/blob/16a455eacaf3eaa48002772d406ebabd309fd607/src/vpalm/instance/leaflets.jl#L104-L144">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="XPalm.VPalm.cylinder-Tuple{}" href="#XPalm.VPalm.cylinder-Tuple{}"><code>XPalm.VPalm.cylinder</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">cylinder()
cylinder(r, l)</code></pre><p>Returns a normalized cylinder mesh, or a cylinder with radius <code>r</code> and length <code>l</code>.</p><p><strong>Arguments</strong></p><ul><li><code>r</code>: The radius of the cylinder.</li><li><code>l</code>: The length of the cylinder.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/XPalm.jl/blob/16a455eacaf3eaa48002772d406ebabd309fd607/src/vpalm/geometry/cylinder.jl#L1-L11">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="XPalm.VPalm.default_parameters-Tuple{}" href="#XPalm.VPalm.default_parameters-Tuple{}"><code>XPalm.VPalm.default_parameters</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">default_parameters(; type=&quot;static&quot;)</code></pre><p>Returns a dictionary of default parameters for the VPalm model.</p><p><strong>Arguments</strong></p><ul><li><code>type</code>: The type of parameters to return, either &quot;static&quot; or &quot;dynamic&quot;. Default is &quot;static&quot;.</li></ul><p><strong>Details</strong></p><p>VPalm can be used in two modes:</p><ul><li>&quot;static&quot;: For static plant architecture, where the plant structure does not change over time. The parameters are measured from one or several real oil palm plants and are used to build mockups of the plant architecture,</li></ul><p>which can then be used for simulations or visualizations around this age.</p><ul><li>&quot;dynamic&quot;: For dynamic plant architecture, where the plant structure can change over time (e.g., growth, environmental effects). This is typically used for simulations that involve plant growth over time (like XPalm), or for digital twins of oil palm plants.</li></ul><p><strong>Example</strong></p><pre><code class="language-julia hljs">default_params = default_parameters()</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/XPalm.jl/blob/16a455eacaf3eaa48002772d406ebabd309fd607/src/vpalm/IO/parameters_IO.jl#L145-L167">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="XPalm.VPalm.dist_and_angles_to_xyz-Tuple{Any, Any, Any}" href="#XPalm.VPalm.dist_and_angles_to_xyz-Tuple{Any, Any, Any}"><code>XPalm.VPalm.dist_and_angles_to_xyz</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">dist_and_angles_to_xyz(dist_p2p1, vangle_xy, vangle_xz)</code></pre><p>Transform distances and angles into point coordinates.</p><p><strong>Arguments</strong></p><ul><li><code>dist_p2p1</code>: Vector of segment lengths (m).</li><li><code>vangle_xy</code>: Vector of angles between the segment and the XY plane (radians).</li><li><code>vangle_xz</code>: Vector of angles between the segment and the XZ plane (radians).</li></ul><p><strong>Returns</strong></p><p>The points as a vector of <code>Meshes.Point</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/XPalm.jl/blob/16a455eacaf3eaa48002772d406ebabd309fd607/src/vpalm/biomechanics/complete/xyz_dist_angles.jl#L52-L65">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="XPalm.VPalm.draw_group_size-Tuple{Any, Any, Any}" href="#XPalm.VPalm.draw_group_size-Tuple{Any, Any, Any}"><code>XPalm.VPalm.draw_group_size</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">draw_group_size(group, leaflet_type_frequencies, rng)</code></pre><p>Determine the size of a leaflet group based on the relative position along the rachis and frequency patterns.</p><p><strong>Arguments</strong></p><ul><li><code>group</code>: Index of the leaflet group based on its relative position on the rachis (1 to <code>length(leaflet_type_frequencies)</code>).</li><li><code>leaflet_type_frequencies</code>: Vector of NamedTuples representing frequency distributions for each rachis segment, with fields:<ul><li><code>high</code>: Frequency of plane=+1 leaflets (first leaflet in each group), <em>i.e.</em> leaflets on &quot;high&quot; position</li><li><code>medium</code>: Frequency of plane=0 leaflets (intermediate leaflets in groups), <em>i.e.</em> leaflets on &quot;medium&quot; position, horizontally inserted on the rachis</li><li><code>low</code>: Frequency of plane=-1 leaflets (terminal leaflets in groups), <em>i.e.</em> leaflets on &quot;low&quot; position</li></ul></li><li><code>rng</code>: Random number generator for stochastic determination.</li></ul><p><strong>Details</strong></p><p>This function implements an inverse relationship between the frequency of high (plane=1) leaflets and group size, modeling a fundamental biological pattern in palm frond architecture:</p><ul><li>Segments with high frequency of high leaflets produce many small groups of leaflets</li><li>Segments with low frequency of high leaflets produce fewer, larger groups of leaflets</li></ul><p>The calculation uses a probabilistic rounding mechanism to ensure proper statistical distribution  of group sizes. This creates the natural variation in leaflet grouping patterns seen along real palm fronds, where clustering patterns change systematically from base to tip.</p><p><strong>Returns</strong></p><p>An integer representing the number of leaflets in the group.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/XPalm.jl/blob/16a455eacaf3eaa48002772d406ebabd309fd607/src/vpalm/instance/leaflets.jl#L812-L841">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="XPalm.VPalm.elliptical_cylinder-Tuple{Any, Any, Any}" href="#XPalm.VPalm.elliptical_cylinder-Tuple{Any, Any, Any}"><code>XPalm.VPalm.elliptical_cylinder</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">elliptical_cylinder(r1, r2, l)</code></pre><p>Create an elliptical cylinder mesh.</p><p><strong>Arguments</strong></p><ul><li><code>r1</code>: The radius of the cylinder in the x direction.</li><li><code>r2</code>: The radius of the cylinder in the y direction.</li><li><code>l</code>: The length of the cylinder.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/XPalm.jl/blob/16a455eacaf3eaa48002772d406ebabd309fd607/src/vpalm/geometry/cylinder.jl#L16-L26">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="XPalm.VPalm.exponetial-Tuple{Any, Any, Any}" href="#XPalm.VPalm.exponetial-Tuple{Any, Any, Any}"><code>XPalm.VPalm.exponetial</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">exponetial(x, a, b)</code></pre><p>Compute an exponential function at given <code>x</code> value.</p><p><strong>Arguments</strong></p><ul><li><code>x</code>: The input value.</li><li><code>a</code>: The coefficient <code>a</code> of the exponential function.</li><li><code>b</code>: The coefficient <code>b</code> of the exponential function.</li></ul><p><strong>Note</strong></p><p>The exponential function is defined as <code>a * exp(b * x)</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/XPalm.jl/blob/16a455eacaf3eaa48002772d406ebabd309fd607/src/vpalm/utils.jl#L75-L89">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="XPalm.VPalm.final_angle-NTuple{4, Any}" href="#XPalm.VPalm.final_angle-NTuple{4, Any}"><code>XPalm.VPalm.final_angle</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">final_angle(young_modulus, z_angle, length, tapering)</code></pre><p>Calculate the maximal deformation angle of a beam.</p><p><strong>Arguments</strong></p><ul><li><code>young_modulus</code>: Value of Young&#39;s modulus</li><li><code>z_angle</code>: Angle from vertical (upright) in radians</li><li><code>length</code>: Length of the beam where the load is applied</li><li><code>tapering</code>: Tapering factor of the beam</li></ul><p><strong>Returns</strong></p><ul><li>The final angle from vertical at the cantilever extremity (in radians)</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/XPalm.jl/blob/16a455eacaf3eaa48002772d406ebabd309fd607/src/vpalm/biomechanics/simplified/young_modulus.jl#L1-L14">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="XPalm.VPalm.group_leaflets-Tuple{Any, Any, Any}" href="#XPalm.VPalm.group_leaflets-Tuple{Any, Any, Any}"><code>XPalm.VPalm.group_leaflets</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">group_leaflets(leaflets_relative_position, leaflets_type_frequency, rng)</code></pre><p>Compute the group, group size and plane positions of each leaflet along the rachis.</p><p><strong>Arguments</strong></p><ul><li><code>leaflets_relative_position</code>: Array of relative positions for the leaflets along the rachis (see <code>relative_leaflet_position()</code>).</li><li><code>leaflets_type_frequency</code>: Vector of NamedTuples representing frequency distributions along the rachis (if <em>e.g.</em> 10 values are provided, it means the rachis is divided into 10 sub-sections), with fields:<ul><li><code>high</code>: Frequency of plane=+1 leaflets (first leaflet in each group), <em>i.e.</em> leaflets on &quot;high&quot; position</li><li><code>medium</code>: Frequency of plane=0 leaflets (intermediate leaflets in groups), <em>i.e.</em> leaflets on &quot;medium&quot; position, horizontally inserted on the rachis</li><li><code>low</code>: Frequency of plane=-1 leaflets (terminal leaflets in groups), <em>i.e.</em> leaflets on &quot;low&quot; position</li></ul></li><li><code>rng</code>: Random number generator.</li></ul><p><strong>Details</strong></p><p>This function:</p><pre><code class="nohighlight hljs">1. Organizes leaflets into groups based on position-dependent size distributions
2. Assigns a spatial plane to each leaflet within a group:
    - The first leaflet in each group is always placed on the high position (plane=1)
    - Subsequent leaflets are positioned on medium (plane=0) or low (plane=-1) positions based on their frequency distribution at that rachis segment</code></pre><p><strong>Biological Context</strong></p><p>Grouping of leaflets is a key morphological feature in palm species, particularly in oil palm (Elaeis guineensis). Unlike some palms with regularly spaced leaflets, oil palms exhibit distinctive clustering patterns where:</p><ol><li>Leaflets occur in groups of variable sizes, but typically around 3 leaflets per group</li><li>Within each group, leaflets emerge at different angles:<ul><li>The first leaflet points upward (high position)</li><li>Others point horizontally or downward (medium and low positions)</li></ul></li><li>The pattern of grouping changes along the rachis:<ul><li>Closer to the base: typically larger groups with more leaflets</li><li>Toward the tip: smaller groups or single leaflets</li></ul></li></ol><p>The model uses an inverse relationship between high-position leaflet frequency and group size to recreate the natural variation in leaflet insertion angle - sections with many high-position leaflets have smaller groups (but more of them), while sections with few high-position leaflets form larger groups.</p><p>The grouping pattern changes along the rachis, creating the characteristic appearance of palm fronds with varying leaflet arrangement  patterns from base to tip.</p><p><strong>Returns</strong></p><p>A NamedTuple containing arrays for:</p><ul><li><code>group</code>: Group identifier for each leaflet</li><li><code>group_size</code>: Size of the group that each leaflet belongs to</li><li><code>plane</code>: Spatial position/orientation of each leaflet (1=high, 0=medium, -1=low)</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/XPalm.jl/blob/16a455eacaf3eaa48002772d406ebabd309fd607/src/vpalm/instance/leaflets.jl#L572-L621">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="XPalm.VPalm.height_to_width_ratio-NTuple{5, Any}" href="#XPalm.VPalm.height_to_width_ratio-NTuple{5, Any}"><code>XPalm.VPalm.height_to_width_ratio</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">height_to_width_ratio(x, ratio_point_c, ratio_point_a, pos_ratio_max, ratio_max)</code></pre><p>Computes the relative width along the rachis.</p><p><strong>Arguments</strong></p><ul><li><code>x</code>: relative position on the rachis</li><li><code>ratio_point_c</code>: ratio at point C</li><li><code>ratio_point_a</code>: ratio at point A</li><li><code>pos_ratio_max</code>: relative position of the maximum value of the ratio</li><li><code>ratio_max</code>: maximum ratio value</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/XPalm.jl/blob/16a455eacaf3eaa48002772d406ebabd309fd607/src/vpalm/architecture/compute_properties_rachis.jl#L217-L229">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="XPalm.VPalm.inertia_flex_rota" href="#XPalm.VPalm.inertia_flex_rota"><code>XPalm.VPalm.inertia_flex_rota</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">inertia_flex_rota(base_width, height, orientation_angle, section_type, grid_size = 100)</code></pre><p>Compute the inertia of bending and torsion, and the cross-section area.</p><p><strong>Arguments</strong></p><ul><li><code>base_width</code>: Dimension of the base.</li><li><code>height</code>: Dimension of the height.</li><li><code>orientation_angle</code>: Section orientation angle (torsion, in radians).</li><li><code>section_type</code>: Section type (see details).</li><li><code>grid_size</code>: Number of discretizations (default to 100).</li></ul><p><strong>Details</strong></p><p>For the section type, possible values are:</p><ul><li><code>section_type = 1</code>: triangle (bottom-oriented)</li><li><code>section_type = 2</code>: rectangle</li><li><code>section_type = 3</code>: triangle (top-oriented)</li><li><code>section_type = 4</code>: ellipse</li><li><code>section_type = 5</code>: circle</li></ul><p><strong>Returns</strong></p><ul><li>A NamedTuple with fields:<ul><li><code>ig_flex</code>: Bending inertia.</li><li><code>ig_tor</code>: Torsion inertia.</li><li><code>sr</code>: Cross-section surface.</li></ul></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/XPalm.jl/blob/16a455eacaf3eaa48002772d406ebabd309fd607/src/vpalm/biomechanics/complete/inertia_flex_rota.jl#L1-L28">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="XPalm.VPalm.init_attributes_seed!-Tuple{Any, Any}" href="#XPalm.VPalm.init_attributes_seed!-Tuple{Any, Any}"><code>XPalm.VPalm.init_attributes_seed!</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">init_attributes_seed!(plant, parameters; rng=Random.MersenneTwister(parameters[&quot;seed&quot;]))</code></pre><p>Initialize the attributes of a palm plant seed (one internode with one leaf), based on the provided parameters.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/XPalm.jl/blob/16a455eacaf3eaa48002772d406ebabd309fd607/src/vpalm/architecture/mtg_skeleton.jl#L115-L120">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="XPalm.VPalm.internode_diameter-NTuple{5, Any}" href="#XPalm.VPalm.internode_diameter-NTuple{5, Any}"><code>XPalm.VPalm.internode_diameter</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">internode_diameter(internode_index, rank, stem_diameter, stem_base_shrinkage, stem_top_shrinkage)</code></pre><p>Computes the diameter of an internode at a given rank.</p><p><strong>Arguments</strong></p><ul><li><code>internode_index</code>: The index of the internode.</li><li><code>rank</code>: The rank of the internode.</li><li><code>stem_diameter</code>: The diameter of the stem at the base.</li><li><code>stem_base_shrinkage</code>: The shrinkage coefficient at the stem base.</li><li><code>stem_top_shrinkage</code>: The shrinkage coefficient at the stem top.</li></ul><p><strong>Returns</strong></p><p>The diameter of the internode (m).</p><p><strong>Details</strong></p><p>A shrinking function is applied to the stem base and top to compute the diameter of the internode.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/XPalm.jl/blob/16a455eacaf3eaa48002772d406ebabd309fd607/src/vpalm/allometries/internode.jl#L1-L19">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="XPalm.VPalm.internode_length-NTuple{6, Any}" href="#XPalm.VPalm.internode_length-NTuple{6, Any}"><code>XPalm.VPalm.internode_length</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">Internode length model</code></pre><p>Computes the length of an internode at a given rank.</p><p><strong>Arguments</strong></p><ul><li><code>i</code>/ <code>internode_index</code>: The index of the internode.</li><li><code>Nbl</code> / <code>nb_internodes</code>: The total number of internodes == number of leaves emitted since planting.</li><li><code>sh</code> / <code>stem_height</code>: The height of the stem.</li><li><code>R</code> / <code>internode_rank_no_expansion</code>: The rank of the internode that will not expand.</li><li><code>N</code> / <code>nb_internodes_before_planting</code>: The number of internodes before planting.</li><li><code>l_0</code> / <code>internode_min_height</code>: The minimal length of the internode.</li></ul><p><strong>Returns</strong></p><p>The length of the internode (m).</p><p><strong>Details</strong></p><p>The internode length is computed using a quadratic function. The objective is to have a internodes that are short and growing for the first emitted leaves (before <code>nb_internodes_before_planting</code>), and then getting to a stable &quot;constant&quot; height, and at the end for the youngest leaves, having nodes currently growing (smaller).</p><p>The internode length is computed as follows :   Internode length     ^ l   |      _____________________     |    /|                     ||   / |                     | l<em>0 |  /  |                     |  |-|–-|––––––––––-|–-|––&gt; Internode number       1   N                   N +   N + Nbl        						  Nbl -                               R where :     - l</em>0 is <code>internode_min_height</code> (m), the minimum height of the internode.     - l is <code>internode_heigth_final</code> (m), the maximum height of the internode.<code>- N is</code>nb<em>internodes</em>before<em>planting<code>, the number of internodes before planting.     - R is</code>internode</em>rank<em>no</em>expansion<code>, the number of internodes not in expansion.     - Nbl is the number of leaves emitted since planting. with the conditions that :     - the sum of the areas of the first triangle, the rectangle and the last triangle is equal to</code>stem<em>height<code>.     - if the equation of the first line is</code>a * x + b<code>:         -</code>a = (l - l</em>0) / (N - 1)<code>-</code>b = l<em>0 - a<code>- the area of the first triangle is</code>a * N * (N + 1) / 2 + b * N<code>and after development :</code>l * N/2 + l</em>0 * N/2<code>- the area of the rectangle (between N + 1 and N + Nbl - R - 1) is</code>(Nbl - R - 1) * l<code>- if the equation of the last line is</code>c * x + d<code>, then:         -</code>c = (l<em>0 - l) / R<code>-</code>d = l</em>0 - c * (Nbl + N)<code>- the area of the last triangle is</code>(R + 1) * (c * (2<em>N + 2</em>Nbl - R) / 2 + d)<code>and after development :</code>l * ((R + 1)/ 2) + l_0 * (-(R + 1) / 2 + R + 1)<code>reminder:     - the sum of integers from m to n is</code>n * (n + 1) / 2 - m * (m - 1) / 2<code>- the sum of cx + d from m to n is</code>c * (n * (n + 1) / 2 - m * (m - 1) / 2) + d * (n - m + 1)<code>or</code>(n - m + 1) * (c * (n + m) / 2 + d)`</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/XPalm.jl/blob/16a455eacaf3eaa48002772d406ebabd309fd607/src/vpalm/allometries/internode.jl#L29-L81">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="XPalm.VPalm.interp_points-Union{Tuple{P}, Tuple{AbstractVector{P}, Any}} where P&lt;:Meshes.Point" href="#XPalm.VPalm.interp_points-Union{Tuple{P}, Tuple{AbstractVector{P}, Any}} where P&lt;:Meshes.Point"><code>XPalm.VPalm.interp_points</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">interp_points(points, step)</code></pre><p>Interpolate points along a path to have equidistant points.</p><p><strong>Arguments</strong></p><ul><li><code>points</code>: Vector of Meshes.Point objects defining the original path.</li><li><code>step</code>: Distance between interpolated points.</li></ul><p><strong>Returns</strong></p><ul><li><code>vec_points</code>: Vector of interpolated Meshes.Point objects.</li><li><code>i_discret_pts_exp</code>: Indices of the original points in the interpolated path.</li><li><code>vec_dist_p2p1</code>: Vector of distances between consecutive points.</li><li><code>vec_angle_xy</code>: Vector of angles between segments and the XY plane.</li><li><code>vec_angle_xz</code>: Vector of angles between segments and the XZ plane.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/XPalm.jl/blob/16a455eacaf3eaa48002772d406ebabd309fd607/src/vpalm/biomechanics/complete/interpolate_points.jl#L1-L16">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="XPalm.VPalm.leaf_insertion_angle" href="#XPalm.VPalm.leaf_insertion_angle"><code>XPalm.VPalm.leaf_insertion_angle</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">leaf_insertion_angle(rank, leaf_max_angle=90, leaf_slope_angle=0.05, leaf_inflection_angle=40)</code></pre><p>Compute the insertion angle of the leaf on the internode.</p><p>Note: The insertion angle is computed using a logistic function.</p><p><strong>Arguments</strong></p><ul><li><code>rank</code>: The rank of the leaf.</li><li><code>leaf_max_angle</code>: The maximum angle of the leaf.</li><li><code>leaf_slope_angle</code>: The slope of the logistic function.</li><li><code>leaf_inflection_angle</code>: The inflection point of the logistic function.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/XPalm.jl/blob/16a455eacaf3eaa48002772d406ebabd309fd607/src/vpalm/allometries/leaf.jl#L1-L14">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="XPalm.VPalm.leaflet_azimuthal_angle-NTuple{7, Any}" href="#XPalm.VPalm.leaflet_azimuthal_angle-NTuple{7, Any}"><code>XPalm.VPalm.leaflet_azimuthal_angle</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">leaflet_azimuthal_angle(relative_pos, side, angle_c, angle_slope, angle_a, angle_sdp, rng)</code></pre><p>Calculate the leaflet insertion angle in the horizontal plane (in degrees).</p><p><strong>Arguments</strong></p><ul><li><code>relative_pos</code>: Relative position of the leaflet on the rachis [0 to 1].</li><li><code>side</code>: Side of the leaf (1 for right, -1 for left).</li><li><code>angle_c</code>: Constant parameter for the axial angle calculation (°).</li><li><code>angle_slope</code>: Slope parameter for the axial angle calculation (°).</li><li><code>angle_a</code>: Amplitude parameter for the axial angle calculation (°).</li><li><code>angle_sdp</code>: Standard deviation percentage for random variation (°).</li><li><code>rng</code>: Random number generator.</li></ul><p><strong>Returns</strong></p><ul><li>Horizontal insertion angle in degrees.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/XPalm.jl/blob/16a455eacaf3eaa48002772d406ebabd309fd607/src/vpalm/instance/leaflets.jl#L1215-L1231">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="XPalm.VPalm.leaflet_length_at_bpoint-Tuple{Any, Any, Any}" href="#XPalm.VPalm.leaflet_length_at_bpoint-Tuple{Any, Any, Any}"><code>XPalm.VPalm.leaflet_length_at_bpoint</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">leaflet_length_at_bpoint(rachis_length, intercept, slope)</code></pre><p>Compute the length of leaflets at the B point of the rachis using a linear relationship.</p><p><strong>Arguments</strong></p><ul><li><code>rachis_length</code>: The total length of the rachis (m).</li><li><code>intercept</code>: The intercept parameter of the linear function (m).</li><li><code>slope</code>: The slope parameter of the linear function (dimensionless).</li></ul><p><strong>Details</strong></p><p>This function uses a linear model to determine leaflet length at the B point:</p><pre><code class="nohighlight hljs">leaflet_length = intercept + slope * rachis_length</code></pre><p>The B point is a key reference point on the rachis that marks the transition from an oval to a round shape of the  rachis. The leaflet length at this point serves as a reference for calculating the distribution of leaflet lengths  along the entire rachis.</p><p><strong>Returns</strong></p><p>The length of leaflets at the B point position (m).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/XPalm.jl/blob/16a455eacaf3eaa48002772d406ebabd309fd607/src/vpalm/instance/leaflets.jl#L955-L979">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="XPalm.VPalm.leaflet_length_max-NTuple{7, Any}" href="#XPalm.VPalm.leaflet_length_max-NTuple{7, Any}"><code>XPalm.VPalm.leaflet_length_max</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">leaflet_length_max(
    leaflet_length_at_b, 
    relative_position_bpoint, 
    relative_length_first_leaflet, 
    relative_length_last_leaflet, 
    relative_position_leaflet_max_length, 
    relative_position_bpoint_sd, 
    rng
)</code></pre><p>Calculate the maximum leaflet length for the rachis, used to scale the relative length profile.</p><p><strong>Arguments</strong></p><ul><li><code>leaflet_length_at_b</code>: Length of leaflets at the B point on the rachis (m).</li><li><code>relative_position_bpoint</code>: Relative position of the B point along the rachis (0 to 1).</li><li><code>relative_length_first_leaflet</code>: Relative length of the first leaflet at rachis base [0 to 1].</li><li><code>relative_length_last_leaflet</code>: Relative length of the last leaflet at rachis tip [0 to 1].</li><li><code>relative_position_leaflet_max_length</code>: Relative position where leaflets reach maximum length [0 to 1].</li><li><code>relative_position_bpoint_sd</code>: Standard deviation for stochastic variation in B point position.</li><li><code>rng</code>: Random number generator.</li></ul><p><strong>Details</strong></p><p>This function calculates the maximum leaflet length that would result in the specified  leaflet length at the B point, considering the shape of the length profile along the rachis.</p><p>The calculation uses the inverse of the relative length function at the B point position  to determine what maximum value would yield the desired length at that specific position.</p><p><strong>Biological Context</strong></p><p>In palm fronds, leaflet length typically follows a bell-shaped distribution along the rachis:</p><ol><li>Leaflets are short at the base (petiole end)</li><li>They increase in length to reach a maximum somewhere close to the middle of the rachis</li><li>They decrease in length toward the tip</li></ol><p>The B point is a key morphological reference point where the rachis cross-section  transitions from oval to round. By knowing the leaflet length at this specific point, we can calculate the maximum leaflet length for the entire frond, which serves as a scaling factor for all other leaflets.</p><p>The stochastic variation in B point position reflects natural biological variability between individual palms or fronds.</p><p><strong>Returns</strong></p><p>The maximum leaflet length for the rachis (m).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/XPalm.jl/blob/16a455eacaf3eaa48002772d406ebabd309fd607/src/vpalm/instance/leaflets.jl#L984-L1034">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="XPalm.VPalm.leaflet_width_at_bpoint-Tuple{Any, Any, Any}" href="#XPalm.VPalm.leaflet_width_at_bpoint-Tuple{Any, Any, Any}"><code>XPalm.VPalm.leaflet_width_at_bpoint</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">leaflet_width_at_bpoint(rachis_length, intercept, slope)</code></pre><p>Calculate leaflet width at B point (reference point).</p><p><strong>Arguments</strong></p><ul><li><code>rachis_length</code>: The total length of the rachis (m).</li><li><code>intercept</code>: The intercept parameter of the linear function (m).</li><li><code>slope</code>: The slope parameter of the linear function (dimensionless).</li></ul><p><strong>Details</strong></p><p>This function uses a linear model to determine leaflet width at the B point:</p><pre><code class="nohighlight hljs">leaflet_width = intercept + slope * rachis_length</code></pre><p>The B point is a key reference point on the rachis that marks the transition  between different architectural zones. The leaflet width at this point serves  as a reference for calculating the distribution of leaflet widths along the  entire rachis.</p><p><strong>Returns</strong></p><ul><li>The width of leaflets at the B point position (m).</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/XPalm.jl/blob/16a455eacaf3eaa48002772d406ebabd309fd607/src/vpalm/instance/leaflets.jl#L1070-L1092">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="XPalm.VPalm.leaflet_width_max-NTuple{7, Any}" href="#XPalm.VPalm.leaflet_width_max-NTuple{7, Any}"><code>XPalm.VPalm.leaflet_width_max</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">leaflet_width_max(
    leaflet_width_at_b,
    relative_position_bpoint,
    width_first,
    width_last,
    pos_width_max,
    relative_position_bpoint_sd,
    rng
)

leaflet_width_max(
    leaflet_width_at_b,
    relative_position_bpoint,
    width_first,
    width_last,
    pos_width_max,
)</code></pre><p>Calculate the maximum leaflet width for the rachis, used to scale the width profile.</p><p><strong>Arguments</strong></p><ul><li><code>leaflet_width_at_b</code>: Width of leaflets at the B point on the rachis (m).</li><li><code>relative_position_bpoint</code>: Mean relative position of the B point along the rachis [0 to 1].</li><li><code>width_first</code>: Relative width of the first leaflet at rachis base [0 to 1].</li><li><code>width_last</code>: Relative width of the last leaflet at rachis tip [0 to 1].</li><li><code>pos_width_max</code>: Relative position where leaflets reach maximum width [0 to 1].</li><li><code>relative_position_bpoint_sd</code>: Standard deviation for stochastic variation in B point position (optional).</li><li><code>rng</code>: Random number generator (optional). </li></ul><p><strong>Details</strong></p><p>This function calculates the maximum leaflet width that would result in the specified  width at the B point, considering the shape of the width profile along the rachis.</p><p>The calculation uses the inverse of the relative width function at the B point position  to determine what maximum value would yield the desired width at that specific position.</p><p><strong>Biological Context</strong></p><p>In palm fronds, leaflet width typically varies along the rachis:</p><ol><li>Narrow leaflets at the base (petiole end)</li><li>Wider leaflets in the middle region</li><li>Narrowing again toward the tip</li></ol><p>By knowing the leaflet width at the B point, we can calculate the maximum  leaflet width for the entire frond, which serves as a scaling factor for  all other leaflets.</p><p><strong>Returns</strong></p><p>The maximum leaflet width for the rachis (m).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/XPalm.jl/blob/16a455eacaf3eaa48002772d406ebabd309fd607/src/vpalm/instance/leaflets.jl#L1097-L1150">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="XPalm.VPalm.leaflet_zenithal_angle-NTuple{12, Any}" href="#XPalm.VPalm.leaflet_zenithal_angle-NTuple{12, Any}"><code>XPalm.VPalm.leaflet_zenithal_angle</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">leaflet_zenithal_angle(relative_pos, leaflet_type, side, high_a0_sup, high_amax_sup, high_a0_inf, high_amax_inf, 
             low_a0_sup, low_amax_sup, low_a0_inf, low_amax_inf, rng)</code></pre><p>Calculate the leaflet insertion angle in the vertical plane (in degrees).</p><p><strong>Arguments</strong></p><ul><li><code>relative_pos</code>: Relative position of the leaflet on the rachis [0 to 1].</li><li><code>leaflet_type</code>: Type of leaflet (-1=down, 0=medium, 1=up).</li><li><code>side</code>: Side of the leaf (1 for right, -1 for left).</li><li><code>high_a0_sup</code>: Upper bound of angle at position 0 for high position leaflets.</li><li><code>high_amax_sup</code>: Upper bound of maximum angle for high position leaflets.</li><li><code>high_a0_inf</code>: Lower bound of angle at position 0 for high position leaflets.</li><li><code>high_amax_inf</code>: Lower bound of maximum angle for high position leaflets.</li><li><code>low_a0_sup</code>: Upper bound of angle at position 0 for low position leaflets.</li><li><code>low_amax_sup</code>: Upper bound of maximum angle for low position leaflets.</li><li><code>low_a0_inf</code>: Lower bound of angle at position 0 for low position leaflets.</li><li><code>low_amax_inf</code>: Lower bound of maximum angle for low position leaflets.</li><li><code>rng</code>: Random number generator.</li></ul><p><strong>Returns</strong></p><ul><li>Vertical insertion angle in degrees.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/XPalm.jl/blob/16a455eacaf3eaa48002772d406ebabd309fd607/src/vpalm/instance/leaflets.jl#L1278-L1300">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="XPalm.VPalm.leaflet_zenithal_angle_boundaries" href="#XPalm.VPalm.leaflet_zenithal_angle_boundaries"><code>XPalm.VPalm.leaflet_zenithal_angle_boundaries</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">leaflet_zenithal_angle_boundaries(rel_pos, a0, a_max, xm=0.5)</code></pre><p>Calculate the boundaries of the radial angle based on position along the rachis.</p><p><strong>Arguments</strong></p><ul><li><code>rel_pos</code>: Relative position on the rachis [0 to 1].</li><li><code>a0</code>: Radial angle around C point.</li><li><code>a_max</code>: Maximum value of radial angle (in degrees).</li><li><code>xm</code>: Relative position on rachis of the maximum radial angle (default: 0.5).</li></ul><p><strong>Returns</strong></p><ul><li>Radial angle in degrees.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/XPalm.jl/blob/16a455eacaf3eaa48002772d406ebabd309fd607/src/vpalm/instance/leaflets.jl#L1247-L1260">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="XPalm.VPalm.leaflets!-NTuple{6, Any}" href="#XPalm.VPalm.leaflets!-NTuple{6, Any}"><code>XPalm.VPalm.leaflets!</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">leaflets!(unique_mtg_id, rachis_node, scale, leaf_rank, rachis_length, parameters; rng=Random.MersenneTwister())</code></pre><p>Create leaflets for a given rachis node, computing their positions, types, and dimensions.</p><p><strong>Arguments</strong></p><ul><li><code>unique_mtg_id</code>: Reference to a unique identifier for the MTG nodes.</li><li><code>rachis_node</code>: The parent node of the rachis where leaflets will be attached.</li><li><code>scale</code>: The scale of the leaflets in the MTG.</li><li><code>leaf_rank</code>: The rank of the leaf associated with the rachis.</li><li><code>rachis_length</code>: The total length of the rachis in meters.</li><li><code>height_cpoint</code>: The height of the central point of the rachis in meters.</li><li><code>width_cpoint</code>: The width of the central point of the rachis in meters.</li><li><code>zenithal_cpoint_angle</code>: The zenithal angle of the central point of the rachis in degrees.</li><li><code>parameters</code>: A dictionary containing biomechanical parameters for the leaflets.</li><li><code>rng</code>: A random number generator for stochastic processes (default is a new MersenneTwister).</li></ul><p><strong>Note</strong></p><p>The <code>parameters</code> is a <code>Dict{String}</code> containing the following keys:</p><ul><li><code>&quot;leaflets_nb_max&quot;</code>: Maximum number of leaflets per rachis.</li><li><code>&quot;leaflets_nb_min&quot;</code>: Minimum number of leaflets per rachis.</li><li><code>&quot;leaflets_nb_slope&quot;</code>: Slope for the number of leaflets distribution.</li><li><code>&quot;leaflets_nb_inflexion&quot;</code>: Inflexion point for the number of leaflets distribution.</li><li><code>&quot;nbLeaflets_SDP&quot;</code>: Standard deviation for the number of leaflets.</li><li><code>&quot;leaflet_position_shape_coefficient&quot;</code>: Shape coefficient for the relative positions of leaflets.</li><li><code>&quot;leaflet_frequency_high&quot;</code>: Frequency of high-position leaflets.</li><li><code>&quot;leaflet_frequency_low&quot;</code>: Frequency of low-position leaflets.</li><li><code>&quot;leaflet_frequency_shape_coefficient&quot;</code>: Shape coefficient for the frequency distribution of leaflets.</li><li><code>&quot;leaflet_between_to_within_group_ratio&quot;</code>: Ratio of spacing between groups to within groups.</li><li><code>&quot;leaflet_length_at_b_intercept&quot;</code>: Intercept for the length of leaflets at point B.</li><li><code>&quot;leaflet_length_at_b_slope&quot;</code>: Slope for the length of leaflets at point B.</li><li><code>&quot;relative_position_bpoint&quot;</code>: Relative position of point B along the rachis.</li><li><code>&quot;relative_position_bpoint_sd&quot;</code>: Standard deviation of the relative position of point B.</li><li><code>&quot;relative_length_first_leaflet&quot;</code>: Relative length of the first leaflet.</li><li><code>&quot;relative_length_last_leaflet&quot;</code>: Relative length of the last leaflet.</li><li><code>&quot;relative_position_leaflet_max_length&quot;</code>: Relative position of the leaflet with maximum length.</li><li><code>&quot;leaflet_width_at_b_intercept&quot;</code>: Intercept for the width of leaflets at point B.</li><li><code>&quot;leaflet_width_at_b_slope&quot;</code>: Slope for the width of leaflets at point B.</li><li><code>&quot;relative_width_first_leaflet&quot;</code>: Relative width of the first leaflet.</li><li><code>&quot;relative_width_last_leaflet&quot;</code>: Relative width of the last leaflet.</li><li><code>&quot;relative_position_leaflet_max_width&quot;</code>: Relative position of the leaflet with maximum width.</li><li><code>&quot;rachis_nb_segments&quot;</code>: Number of segments in the rachis.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/XPalm.jl/blob/16a455eacaf3eaa48002772d406ebabd309fd607/src/vpalm/instance/leaflets.jl#L484-L529">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="XPalm.VPalm.linear-Tuple{Any, Any, Any}" href="#XPalm.VPalm.linear-Tuple{Any, Any, Any}"><code>XPalm.VPalm.linear</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">linear(x, intercept, slope)</code></pre><p>Compute a linear function at given <code>x</code> value.</p><p><strong>Arguments</strong></p><ul><li><code>x</code>: The input value.</li><li><code>intercept</code>: The intercept of the linear function.</li><li><code>slope</code>: The slope of the linear function.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/XPalm.jl/blob/16a455eacaf3eaa48002772d406ebabd309fd607/src/vpalm/utils.jl#L59-L69">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="XPalm.VPalm.local_flexion-NTuple{5, Any}" href="#XPalm.VPalm.local_flexion-NTuple{5, Any}"><code>XPalm.VPalm.local_flexion</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">local_flexion(current_angle, final_angle, young_modulus, tapering, relative_position)</code></pre><p>Calculate the local bending angle at a specific position along the beam.</p><p><strong>Arguments</strong></p><ul><li><code>current_angle</code>: Current angle in radians</li><li><code>final_angle</code>: Final angle of the beam in radians</li><li><code>young_modulus</code>: Value of Young&#39;s modulus</li><li><code>tapering</code>: Tapering factor of the beam</li><li><code>relative_position</code>: Relative position along the beam (0 to 1)</li></ul><p><strong>Returns</strong></p><ul><li>Flexion angle at the current position (in radians)</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/XPalm.jl/blob/16a455eacaf3eaa48002772d406ebabd309fd607/src/vpalm/biomechanics/simplified/young_modulus.jl#L65-L79">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="XPalm.VPalm.logistic-NTuple{4, Any}" href="#XPalm.VPalm.logistic-NTuple{4, Any}"><code>XPalm.VPalm.logistic</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">logistic(x, max, slope, inflection)</code></pre><p>Compute a logistic function.</p><p><strong>Arguments</strong></p><ul><li><code>x</code>: The input value.</li><li><code>max</code>: The maximum value of the logistic function.</li><li><code>slope</code>: The slope of the logistic function.</li><li><code>inflection</code>: The inflection point of the logistic function.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/XPalm.jl/blob/16a455eacaf3eaa48002772d406ebabd309fd607/src/vpalm/utils.jl#L1-L12">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="XPalm.VPalm.mean_and_sd-Tuple{Any, Any}" href="#XPalm.VPalm.mean_and_sd-Tuple{Any, Any}"><code>XPalm.VPalm.mean_and_sd</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">mean_and_sd(mean, sd; rng=Random.MersenneTwister(1234))</code></pre><p>Compute a random value from a normal distribution with a given mean and standard deviation.</p><p><strong>Arguments</strong></p><ul><li><code>mean</code>: The mean of the normal distribution.</li><li><code>sd</code>: The standard deviation of the normal distribution.</li></ul><p><strong>Optional arguments</strong></p><ul><li><code>rng</code>: The random number generator.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/XPalm.jl/blob/16a455eacaf3eaa48002772d406ebabd309fd607/src/vpalm/utils.jl#L21-L35">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="XPalm.VPalm.mtg_skeleton-Tuple{Any}" href="#XPalm.VPalm.mtg_skeleton-Tuple{Any}"><code>XPalm.VPalm.mtg_skeleton</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">mtg_skeleton(nb_internodes)</code></pre><p>Makes an MTG skeleton with <code>nb_leaves_emitted</code> leaves, including all intermediate organs:</p><ul><li>Plant: the whole palm</li><li>Stem: the stem of the plant, <em>i.e.</em> the remaining part of the plant after the leaves have been removed</li><li>Phytomer: the part that includes the leaf and the internode</li><li>Internodes: the part of the phytomer that is between two leaves</li><li>Leaf: the leaf of the plant, also called frond</li></ul><p>Note: this skeleton does not include reproductive organs (inflorescences, fruits) or the scales that decompose the leaf (petiole, rachis, leaflets).</p><p><strong>Arguments</strong></p><ul><li><code>nb_internodes</code>: The number of internodes to emit.</li></ul><p><strong>Examples</strong></p><pre><code class="language-julia hljs">file = joinpath(dirname(dirname(pathof(VPalm))), &quot;test&quot;, &quot;files&quot;, &quot;parameter_file.yml&quot;)
parameters = read_parameters(file)
mtg_skeleton(parameters)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/XPalm.jl/blob/16a455eacaf3eaa48002772d406ebabd309fd607/src/vpalm/architecture/mtg_skeleton.jl#L1-L25">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="XPalm.VPalm.normal_deviation_draw" href="#XPalm.VPalm.normal_deviation_draw"><code>XPalm.VPalm.normal_deviation_draw</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">normal_deviation_draw(sd, rng=Random.MersenneTwister(1234))</code></pre><p>Draw a random value from a normal distribution with a given standard deviation.</p><p><strong>Arguments</strong></p><ul><li><code>sd</code>: The standard deviation of the normal distribution.</li></ul><p><strong>Optional arguments</strong></p><ul><li><code>rng</code>: The random number generator.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/XPalm.jl/blob/16a455eacaf3eaa48002772d406ebabd309fd607/src/vpalm/utils.jl#L40-L53">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="XPalm.VPalm.normal_deviation_percent_draw-Tuple{Any, Any, Any}" href="#XPalm.VPalm.normal_deviation_percent_draw-Tuple{Any, Any, Any}"><code>XPalm.VPalm.normal_deviation_percent_draw</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">normal_deviation_percent_draw(value, sdp, rng)</code></pre><p>Calculate a normally distributed random deviation based on a percentage of the value.</p><p><strong>Arguments</strong></p><ul><li><code>value</code>: Base value.</li><li><code>sd</code>: Standard deviation in %.</li><li><code>rng</code>: Random number generator.</li></ul><p><strong>Returns</strong></p><ul><li>The random deviation.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/XPalm.jl/blob/16a455eacaf3eaa48002772d406ebabd309fd607/src/vpalm/utils.jl#L94-L107">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="XPalm.VPalm.normalize_positions!-Tuple{Any, Any}" href="#XPalm.VPalm.normalize_positions!-Tuple{Any, Any}"><code>XPalm.VPalm.normalize_positions!</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">normalize_positions!(positions, rachis_length)</code></pre><p>Scale and offset positions to span the full rachis length.</p><p><strong>Arguments</strong></p><ul><li><code>positions</code>: Vector of positions to be modified in place.</li><li><code>rachis_length</code>: Total length of rachis in meters.</li></ul><p><strong>Details</strong></p><p>This function:</p><ol><li>Offsets positions so the first leaflet is at position 0</li><li>Scales all positions to ensure the last leaflet is exactly at rachis_length</li><li>Maintains the relative spacing pattern established by previous processing</li></ol><p>This ensures leaflets are properly distributed along the entire rachis while preserving the characteristic grouping patterns.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/XPalm.jl/blob/16a455eacaf3eaa48002772d406ebabd309fd607/src/vpalm/instance/leaflets.jl#L923-L943">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="XPalm.VPalm.petiole-NTuple{7, Any}" href="#XPalm.VPalm.petiole-NTuple{7, Any}"><code>XPalm.VPalm.petiole</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">petiole(parent_node, index, scale, rachis_length, zenithal_insertion_angle, zenithal_cpoint_angle, parameters)</code></pre><p>Make a leaf petiole.</p><p><strong>Arguments</strong></p><ul><li><code>unique_mtg_id</code>: a next free unique id for the MTG nodes</li><li><code>parent_node</code>: the parent node on which the petiole will be attached</li><li><code>index</code>: the MTG index of the petiole</li><li><code>scale</code>: the MTG scale of the petiole</li><li><code>rachis_length</code>: the rachis length, used to feed allometries to compute the petiole dimensions</li><li><code>zenithal_insertion_angle</code>: petiole insertion angle</li><li><code>zenithal_cpoint_angle</code>: angle at the C point (tip of the petiole, starting point of the rachis)</li><li><code>parameters</code>: a list of parameters as a <code>Dict{String}</code>:<ul><li>&quot;leaf<em>base</em>width&quot;: the base width of the petiole (m)</li><li>&quot;leaf<em>base</em>height&quot;: the base heigth of the petiole (m)</li><li>&quot;cpoint<em>width</em>intercept&quot;: petiole width at the c-point intercept for linear interpolation (m)</li><li>&quot;cpoint<em>width</em>slope&quot;: petiole width at the c-point slope for linear interpolation</li><li>&quot;cpoint<em>height</em>width_ratio&quot;: height to width ratio at the C point</li><li>&quot;petiole<em>rachis</em>ratio_mean&quot;: the average value of the ratio between rachis length and petiole length</li><li>&quot;petiole<em>rachis</em>ratio_sd&quot;: its standard deviation</li><li>&quot;petiole<em>nb</em>segments&quot;: the number of segments used to discretize the petiole</li></ul></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/XPalm.jl/blob/16a455eacaf3eaa48002772d406ebabd309fd607/src/vpalm/instance/petiole.jl#L1-L24">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="XPalm.VPalm.petiole_azimuthal_angle-Tuple{}" href="#XPalm.VPalm.petiole_azimuthal_angle-Tuple{}"><code>XPalm.VPalm.petiole_azimuthal_angle</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">petiole_azimuthal_angle(; rng=Random.MersenneTwister(1))</code></pre><p>Compute the azimuthal angle of the petiole based on the petiole/rachis length ratio.</p><p><strong>Arguments</strong></p><ul><li><code>petiole_rachis_ratio_mean</code>: Average value of the petiole/rachis length ratio</li><li><code>petiole_rachis_ratio_sd</code>: Standard deviation of the petiole/rachis length ratio</li><li><code>rng</code>: Random number generator</li></ul><p><strong>Returns</strong></p><p>The azimuthal angle of the petiole (°)</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/XPalm.jl/blob/16a455eacaf3eaa48002772d406ebabd309fd607/src/vpalm/allometries/petiole.jl#L22-L36">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="XPalm.VPalm.petiole_dimensions_at_cpoint" href="#XPalm.VPalm.petiole_dimensions_at_cpoint"><code>XPalm.VPalm.petiole_dimensions_at_cpoint</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">petiole_dimensions_at_cpoint(rachis_length, cpoint_width_intercept, cpoint_width_slope, cpoint_height_width_ratio)</code></pre><p>Compute the width and height of the petiole at the C point (end-point).</p><p><strong>Arguments</strong></p><ul><li><code>rachis_length</code>: Length of the rachis (m)</li><li><code>cpoint_width_intercept=0.0098u&quot;m&quot;</code>: Intercept of the linear relationship between rachis width at C point and rachis length (m)</li><li><code>cpoint_width_slope=0.012</code>: Slope of the linear relationship</li><li><code>cpoint_height_width_ratio=0.568</code>: Ratio between the height and width of the leaf at C point</li></ul><p><strong>Returns</strong></p><p>A named tuple with the following keys:</p><ul><li><code>width_cpoint</code>: Width at the C point of the petiole (m)</li><li><code>height_cpoint</code>: Height at the C point of the petiole (m)</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/XPalm.jl/blob/16a455eacaf3eaa48002772d406ebabd309fd607/src/vpalm/allometries/petiole.jl#L41-L59">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="XPalm.VPalm.petiole_height-Tuple{Any, Any, Any}" href="#XPalm.VPalm.petiole_height-Tuple{Any, Any, Any}"><code>XPalm.VPalm.petiole_height</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">petiole_height(relative_position, height_cpoint, height_base)</code></pre><p>Compute the height profile along the petiole (m).</p><p><strong>Arguments</strong></p><ul><li><code>relative_position</code>: Position along the petiole (0-1)</li><li><code>height_base</code>: Height at the base of the leaf</li><li><code>height_cpoint</code>: Height of the leaf section at C point</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/XPalm.jl/blob/16a455eacaf3eaa48002772d406ebabd309fd607/src/vpalm/allometries/petiole.jl#L106-L116">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="XPalm.VPalm.petiole_length" href="#XPalm.VPalm.petiole_length"><code>XPalm.VPalm.petiole_length</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">petiole_length(petiole_rachis_ratio_mean, petiole_rachis_ratio_sd, rachis_length; rng=Random.MersenneTwister(1))</code></pre><p>Compute the length of the petiole based on the rachis length and the petiole/rachis length ratio.</p><p><strong>Arguments</strong></p><ul><li><code>rachis_length</code>: Length of the rachis (m)</li><li><code>petiole_rachis_ratio_mean=0.25</code>: Average value of the petiole/rachis length ratio</li><li><code>petiole_rachis_ratio_sd=0.034</code>: Standard deviation of the petiole/rachis length ratio</li><li><code>rng</code>: Random number generator</li></ul><p><strong>Returns</strong></p><p>The length of the petiole (m)</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/XPalm.jl/blob/16a455eacaf3eaa48002772d406ebabd309fd607/src/vpalm/allometries/petiole.jl#L2-L17">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="XPalm.VPalm.petiole_sections!-Tuple{Any, Any, Any}" href="#XPalm.VPalm.petiole_sections!-Tuple{Any, Any, Any}"><code>XPalm.VPalm.petiole_sections!</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">petiole_sections!(petiole_node, petiole_nb_segments, unique_mtg_id)</code></pre><p>Create the sections of a petiole.</p><p><strong>Arguments</strong></p><ul><li><code>petiole_node</code>: the MTG Node of the petiole</li><li><code>petiole_nb_segments</code>: the number of segments used to discretize the petiole</li><li><code>unique_mtg_id</code>: a next free unique id for the MTG nodes, given as a <code>Ref{Int}</code></li></ul><p><strong>Returns</strong></p><p>Nothing, the petiole node is updated in-place with its sections.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/XPalm.jl/blob/16a455eacaf3eaa48002772d406ebabd309fd607/src/vpalm/instance/petiole.jl#L43-L57">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="XPalm.VPalm.petiole_width-Tuple{Any, Any, Any}" href="#XPalm.VPalm.petiole_width-Tuple{Any, Any, Any}"><code>XPalm.VPalm.petiole_width</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">petiole_width(relative_position, width_cpoint, width_base)</code></pre><p>Compute the width profile along the petiole (m).</p><p><strong>Arguments</strong></p><ul><li><code>relative_position</code>: Position along the petiole (0-1) </li><li><code>width_base</code>: Width at base of leaf</li><li><code>width_cpoint</code>: Width of the leaf at C point</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/XPalm.jl/blob/16a455eacaf3eaa48002772d406ebabd309fd607/src/vpalm/allometries/petiole.jl#L121-L131">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="XPalm.VPalm.phyllotactic_angle-Tuple{Any, Any}" href="#XPalm.VPalm.phyllotactic_angle-Tuple{Any, Any}"><code>XPalm.VPalm.phyllotactic_angle</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">phyllotactic_angle(phyllotactic_angle_mean, phyllotactic_angle_sd; rng=Random.MersenneTwister(1234))</code></pre><p>Computes the phyllotactic angle (°) using an average angle and a standard deviation (random draw from a normal distribution).</p><p><strong>Arguments</strong></p><ul><li><code>phyllotactic_angle_mean</code>: The average phyllotactic angle (°).</li><li><code>phyllotactic_angle_sd</code>: The standard deviation of the phyllotactic angle (°).</li></ul><p><strong>Optional arguments</strong></p><ul><li><code>rng</code>: The random number generator.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/XPalm.jl/blob/16a455eacaf3eaa48002772d406ebabd309fd607/src/vpalm/allometries/internode.jl#L108-L121">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="XPalm.VPalm.piecewise_linear_area-Tuple{Any, Any}" href="#XPalm.VPalm.piecewise_linear_area-Tuple{Any, Any}"><code>XPalm.VPalm.piecewise_linear_area</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">piecewise_linear_area(x, y)</code></pre><p>Calculate the area under a piecewise linear function. Equivalent to PiecewiseFunctionArea in the Java version.</p><p><strong>Arguments</strong></p><ul><li><code>x</code>: Array of x-coordinates of the control points.</li><li><code>y</code>: Array of y-coordinates of the control points.</li></ul><p><strong>Returns</strong></p><ul><li>Area under the piecewise linear function.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/XPalm.jl/blob/16a455eacaf3eaa48002772d406ebabd309fd607/src/vpalm/utils.jl#L161-L173">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="XPalm.VPalm.plane-Tuple{}" href="#XPalm.VPalm.plane-Tuple{}"><code>XPalm.VPalm.plane</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">create_plane_mesh()</code></pre><p>Create a simple rectangular plane mesh that will be used as a reference for leaflet segments. The plane is created in the XZ plane with width along X and length along Z.</p><p><strong>Returns</strong></p><p>A Meshes.SimpleMesh object representing a simple rectangular plane mesh</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/XPalm.jl/blob/16a455eacaf3eaa48002772d406ebabd309fd607/src/vpalm/geometry/plane.jl#L1-L10">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="XPalm.VPalm.properties_petiole_section-NTuple{9, Any}" href="#XPalm.VPalm.properties_petiole_section-NTuple{9, Any}"><code>XPalm.VPalm.properties_petiole_section</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">properties_petiole_section(
    index, nb_sections, width_base, height_base,
    width_cpoint, height_cpoint, petiole_section_length,
    petiole_insertion_angle, petiole_section_insertion_angle,
    azimuthal_angle
)</code></pre><p>Compute the properties of each section of the petiole.</p><p><strong>Arguments</strong></p><ul><li><code>index</code>: The index of the section within all sections (1-nb_sections)</li><li><code>nb_sections</code>: The number of sections discretizing the petiole</li><li><code>width_base</code>: Width of the petiole at its base (m)</li><li><code>heigth_base</code>: Height of the petiole at its base (m)</li><li><code>width_cpoint</code>: Width of the petiole at the C point (tip of the petiole, <em>i.e.</em> transition point to rachis, m)</li><li><code>height_cpoint</code>: Height at the C point (m)</li><li><code>petiole_section_length</code>: The length of the petiole sections (m)</li><li><code>petiole_insertion_angle</code>: Zenithal angle of insertion between the petiole and the stipe (local angle, relative to the stipe, °)</li><li><code>petiole_section_insertion_angle</code>: The zenithal angle of insertion between the petioles sections (°)</li><li><code>azimuthal_angle</code>: Azimuthal angle at the insertion (°)</li></ul><p><strong>Returns</strong></p><p>A vector of dimensions for each section, given as a named tuple:</p><ul><li>width: width of the section (m)</li><li>height: height of the section (m)</li><li>length: length of the section (m)</li><li>zenithal_angle: zenithal angle of the section (global angle, °)</li><li>azimuthal_angle: azimuthal angle of the section (global angle, °)</li><li>torsion_angle: torsion angle of the section (°)</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/XPalm.jl/blob/16a455eacaf3eaa48002772d406ebabd309fd607/src/vpalm/architecture/compute_properties_petiole.jl#L121-L153">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="XPalm.VPalm.rachis-NTuple{10, Any}" href="#XPalm.VPalm.rachis-NTuple{10, Any}"><code>XPalm.VPalm.rachis</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">rachis(unique_mtg_id, index, scale, leaf_rank, rachis_length, height_cpoint, width_cpoint, zenithal_cpoint_angle, fresh_biomass, parameters; rng)</code></pre><p>Builds a rachis node in the MTG structure.</p><p><strong>Arguments</strong></p><ul><li><code>unique_mtg_id</code>: A reference to a unique identifier for the MTG nodes.</li><li><code>index</code>: The index of the rachis segment.</li><li><code>scale</code>: The scale of the rachis segment.</li><li><code>leaf_rank</code>: The rank of the leaf associated with the rachis.</li><li><code>rachis_length</code>: The length of the rachis (m).</li><li><code>height_cpoint</code>: The height of the central point of the rachis (m).</li><li><code>width_cpoint</code>: The width of the central point of the rachis (m).</li><li><code>zenithal_cpoint_angle</code>: The zenithal angle of the central point of the rachis (°).</li><li><code>fresh_biomass</code>: The fresh biomass of the rachis (kg).</li><li><code>parameters</code>: A dictionary containing biomechanical parameters for the rachis (see below).</li><li><code>rng</code>: A random number generator for stochastic processes.</li></ul><p><strong>Note</strong></p><p>The <code>parameters</code> is a <code>Dict{String}</code> containing the following keys:</p><ul><li><code>&quot;rachis_nb_segments&quot;</code>: The number of segments in the rachis.</li><li><code>&quot;rachis_twist_initial_angle&quot;</code>: The initial twist angle of the rachis (°).</li><li><code>&quot;rachis_twist_initial_angle_sdp&quot;</code>: The standard deviation of the initial twist angle (°).</li><li><code>&quot;elastic_modulus&quot;</code>: The elastic modulus of the rachis material (Pa).</li><li><code>&quot;shear_modulus&quot;</code>: The shear modulus of the rachis material (Pa).</li><li><code>&quot;leaflet_length_at_b_intercept&quot;</code>: The intercept for the leaflet length at point B (m).</li><li><code>&quot;leaflet_length_at_b_slope&quot;</code>: The slope for the leaflet length at point B (m).</li><li><code>&quot;relative_position_bpoint&quot;</code>: The relative position of point B along the rachis (m).</li><li><code>&quot;relative_position_bpoint_sd&quot;</code>: The standard deviation of the relative position of point B (m).</li><li><code>&quot;relative_length_first_leaflet&quot;</code>: The relative length of the first leaflet (m).</li><li><code>&quot;relative_length_last_leaflet&quot;</code>: The relative length of the last leaflet (m).</li><li><code>&quot;relative_position_leaflet_max_length&quot;</code>: The relative position of the leaflet with maximum length (m).</li><li><code>&quot;height_rachis_tappering&quot;</code>: The height at which the rachis tapers (m).</li><li><code>&quot;rachis_width_tip&quot;</code>: The width of the rachis tip (m).</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/XPalm.jl/blob/16a455eacaf3eaa48002772d406ebabd309fd607/src/vpalm/instance/rachis.jl#L1-L38">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="XPalm.VPalm.rachis_expansion-Tuple{Any, Any}" href="#XPalm.VPalm.rachis_expansion-Tuple{Any, Any}"><code>XPalm.VPalm.rachis_expansion</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">rachis_expansion(leaf_rank, rachis_final_length)

Simple function to compute the rachis expansion (using an expansion factor)
    based on the leaf rank.

# Arguments

- `leaf_rank`: The rank of the leaf.
- `rachis_final_length`: The final length of the rachis.</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/XPalm.jl/blob/16a455eacaf3eaa48002772d406ebabd309fd607/src/vpalm/architecture/compute_properties_leaf.jl#L93-L103">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="XPalm.VPalm.rachis_height-Tuple{Any, Any, Any}" href="#XPalm.VPalm.rachis_height-Tuple{Any, Any, Any}"><code>XPalm.VPalm.rachis_height</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">rachis_height(relative_position, cpoint_height, rachis_height_tappering)</code></pre><p>Computes the rachis height (m) at a given relative position using a the height at C Point and rachis tappering.</p><p><strong>Arguments</strong></p><ul><li><code>relative_position</code>: The relative position along the rachis (0: base to 1: tip).</li><li><code>cpoint_height</code>: The height of the rachis at the C point, <em>i.e.</em> rachis base (m).</li><li><code>rachis_height_tappering</code>: The tappering factor for the rachis height.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/XPalm.jl/blob/16a455eacaf3eaa48002772d406ebabd309fd607/src/vpalm/architecture/compute_properties_rachis.jl#L185-L195">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="XPalm.VPalm.rachis_length_from_biomass-Tuple{Any, Any, Any}" href="#XPalm.VPalm.rachis_length_from_biomass-Tuple{Any, Any, Any}"><code>XPalm.VPalm.rachis_length_from_biomass</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">rachis_length_from_biomass(rachis_biomass, leaf_length_intercept, leaf_length_slope)</code></pre><p>Compute the length of the rachis based on its biomass using a linear relationship.</p><p><strong>Arguments</strong></p><ul><li><code>rachis_biomass</code>: The biomass of the rachis (g).</li><li><code>leaf_length_intercept</code>: The intercept of the linear relationship for leaf length.</li><li><code>leaf_length_slope</code>: The slope of the linear relationship for leaf length.</li></ul><p><strong>Returns</strong></p><p>The length of the rachis (m).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/XPalm.jl/blob/16a455eacaf3eaa48002772d406ebabd309fd607/src/vpalm/architecture/compute_properties_leaf.jl#L74-L88">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="XPalm.VPalm.rachis_width-Tuple{Any, Any, Any}" href="#XPalm.VPalm.rachis_width-Tuple{Any, Any, Any}"><code>XPalm.VPalm.rachis_width</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">rachis_width(relative_position, cpoint_width, rachis_width_tip)</code></pre><p>Computes the rachis width (m) at a given relative position using the width at C Point and rachis width at the tip.</p><p><strong>Arguments</strong></p><ul><li><code>relative_position</code>: The relative position along the rachis (0: base to 1: tip).</li><li><code>cpoint_width</code>: The width of the rachis at the C point, <em>i.e.</em> rachis base (m).</li><li><code>rachis_width_tip</code>: The width of the rachis at the tip (m).</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/XPalm.jl/blob/16a455eacaf3eaa48002772d406ebabd309fd607/src/vpalm/architecture/compute_properties_rachis.jl#L202-L212">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="XPalm.VPalm.read_parameters-Tuple{Any}" href="#XPalm.VPalm.read_parameters-Tuple{Any}"><code>XPalm.VPalm.read_parameters</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">read_parameters(file; verbose=true)</code></pre><p>Reads a parameter file and returns the contents as an ordered dictionary.</p><p><strong>Arguments</strong></p><ul><li><code>file</code>: The path to the parameter file.</li><li><code>verbose</code>: Whether to show warnings for units (default: true)</li></ul><p><strong>Returns</strong></p><p>An ordered dictionary containing the contents of the parameter file with appropriate units.</p><p><strong>Example</strong></p><pre><code class="language-julia hljs">file = joinpath(dirname(dirname(pathof(VPalm))),&quot;test&quot;,&quot;files&quot;,&quot;parameter_file.yml&quot;)
read_parameters(file)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/XPalm.jl/blob/16a455eacaf3eaa48002772d406ebabd309fd607/src/vpalm/IO/parameters_IO.jl#L1-L21">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="XPalm.VPalm.read_ply-Tuple{Any}" href="#XPalm.VPalm.read_ply-Tuple{Any}"><code>XPalm.VPalm.read_ply</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">read_ply(fname)</code></pre><p>Reads a PLY file and returns a <code>Meshes.SimpleMesh</code> object.</p><p><strong>Arguments</strong></p><ul><li><code>fname</code>: The path to the PLY file.</li></ul><p><strong>Returns</strong></p><p>A <code>Meshes.SimpleMesh</code> object.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/XPalm.jl/blob/16a455eacaf3eaa48002772d406ebabd309fd607/src/vpalm/geometry/read_ply.jl#L1-L13">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="XPalm.VPalm.relative_leaflet_length-NTuple{4, Any}" href="#XPalm.VPalm.relative_leaflet_length-NTuple{4, Any}"><code>XPalm.VPalm.relative_leaflet_length</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">relative_leaflet_length(x, relative_length_first_leaflet, relative_length_last_leaflet, relative_position_leaflet_max_length)</code></pre><p>Relative leaflet length given by their relative position along the rachis.</p><p><strong>Arguments</strong></p><ul><li><code>x</code>: relative leaflet position on the rachis (0: base to 1: tip)</li><li><code>relative_length_first_leaflet</code>: relative length of the first leaflet on the rachis (0 to 1)</li><li><code>relative_length_last_leaflet</code>: relative length of the last leaflet on the rachis  (0 to 1)</li><li><code>relative_position_leaflet_max_length</code>: relative position of the longest leaflet on the rachis (0.111 to 0.999)</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/XPalm.jl/blob/16a455eacaf3eaa48002772d406ebabd309fd607/src/vpalm/instance/leaflets.jl#L1049-L1060">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="XPalm.VPalm.relative_leaflet_position-Tuple{Any, Any}" href="#XPalm.VPalm.relative_leaflet_position-Tuple{Any, Any}"><code>XPalm.VPalm.relative_leaflet_position</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">relative_leaflet_position(relative_rank, shape_coefficient)</code></pre><p>Compute the relative leaflet position on the rachis.</p><p><strong>Arguments</strong></p><ul><li><code>relative_rank</code>: Relative leaflet rank, usually in the form of (0 to 1].</li><li><code>shape_coefficient</code>: Shape coefficient (around 0).</li></ul><p><strong>Returns</strong></p><p>The relative leaflet position, in the same form as <code>relative_rank</code>, usually (0 to 1].</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/XPalm.jl/blob/16a455eacaf3eaa48002772d406ebabd309fd607/src/vpalm/instance/leaflets.jl#L762-L775">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="XPalm.VPalm.relative_leaflet_width-NTuple{4, Any}" href="#XPalm.VPalm.relative_leaflet_width-NTuple{4, Any}"><code>XPalm.VPalm.relative_leaflet_width</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">relative_leaflet_width(x, width_first, width_last, pos_width_max)</code></pre><p>Calculate the relative leaflet width at a given position along the rachis.</p><p><strong>Arguments</strong></p><ul><li><code>x</code>: Relative position of the leaflet on the rachis [0 to 1].</li><li><code>width_first</code>: Relative width of the first leaflet (at rachis base).</li><li><code>width_last</code>: Relative width of the last leaflet (at rachis tip).</li><li><code>pos_width_max</code>: Relative position where leaflets reach maximum width [0 to 1].</li></ul><p><strong>Details</strong></p><p>This function uses a piecewise linear model to calculate relative leaflet width:</p><ol><li>From base to maximum width position: Linear increase from <code>width_first</code> to 1.0</li><li>From maximum width position to tip: Linear decrease from 1.0 to <code>width_last</code></li></ol><p><strong>Biological Context</strong></p><p>The width of leaflets along a palm frond typically follows a pattern where:</p><ul><li>Leaflets start relatively narrow at the base</li><li>Widen to reach maximum width at some point along the rachis</li><li>Narrow again toward the tip</li></ul><p><strong>Returns</strong></p><p>The relative width at position x [0 to 1].</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/XPalm.jl/blob/16a455eacaf3eaa48002772d406ebabd309fd607/src/vpalm/instance/leaflets.jl#L1175-L1205">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="XPalm.VPalm.shrink_leaflets_in_groups!" href="#XPalm.VPalm.shrink_leaflets_in_groups!"><code>XPalm.VPalm.shrink_leaflets_in_groups!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">shrink_leaflets_in_groups!(positions, leaflets, ratio=2.0)</code></pre><p>Adjust the spacing between leaflets to create appropriate within-group and between-group distances.</p><p><strong>Arguments</strong></p><ul><li><code>positions</code>: Vector of current leaflet positions along the rachis.</li><li><code>leaflets</code>: A NamedTuple containing arrays for leaflet properties (group, group_size, plane).</li><li><code>ratio=2.0</code>: Ratio of inter-group to intra-group spacing.</li></ul><p><strong>Details</strong></p><p>This function implements a biological principle where leaflets within the same group are positioned closer together than leaflets in different groups. It:</p><ol><li>Uses a fixed ratio (2:1) between inter-group and intra-group spacing</li><li>Preserves the overall distribution pattern while creating distinct groups</li><li>Processes each group sequentially, adjusting positions based on group size</li></ol><p><strong>Biological Context</strong></p><p>In many palm species, particularly oil palm, leaflets appear in distinct groups along the rachis. This grouping pattern is characterized by:</p><ol><li>Consistent, smaller spacing between leaflets within the same group</li><li>Larger spacing between adjacent groups</li><li>The ratio between these spacings is typically species-specific</li></ol><p>This spacing pattern is essential for the palm&#39;s characteristic appearance and  affects light interception patterns along the frond.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/XPalm.jl/blob/16a455eacaf3eaa48002772d406ebabd309fd607/src/vpalm/instance/leaflets.jl#L854-L885">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="XPalm.VPalm.snag-Tuple{}" href="#XPalm.VPalm.snag-Tuple{}"><code>XPalm.VPalm.snag</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">snag()
snag(l, w, h)</code></pre><p>Returns a normalized snag mesh, or a snag mesh with given dimensions in m.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/XPalm.jl/blob/16a455eacaf3eaa48002772d406ebabd309fd607/src/vpalm/geometry/snag.jl#L1-L7">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="XPalm.VPalm.stem_bending-Tuple{Any, Any}" href="#XPalm.VPalm.stem_bending-Tuple{Any, Any}"><code>XPalm.VPalm.stem_bending</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">stem_bending(stem_bending_mean, stem_bending_sd; rng=Random.MersenneTwister(1234))</code></pre><p>Computes the stem bending (°) using an average bending and a standard deviation (random draw from a normal distribution).</p><p><strong>Arguments</strong></p><ul><li><code>stem_bending_mean</code>: The average stem bending (°).</li><li><code>stem_bending_sd</code>: The standard deviation of the stem bending (°).</li></ul><p><strong>Optional arguments</strong></p><ul><li><code>rng</code>: The random number generator.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/XPalm.jl/blob/16a455eacaf3eaa48002772d406ebabd309fd607/src/vpalm/allometries/stem.jl#L2-L15">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="XPalm.VPalm.stem_diameter-NTuple{6, Any}" href="#XPalm.VPalm.stem_diameter-NTuple{6, Any}"><code>XPalm.VPalm.stem_diameter</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">stem_diameter(rachis_length_reference, stem_diameter_max, stem_diameter_slope, stem_diameter_inflection, stem_diameter_residual)</code></pre><p>Computes the stem diameter (m) at a given rachis length reference (m).</p><p><strong>Arguments</strong></p><ul><li><code>rachis_length_reference</code>: The rachis length reference (m). Taken as the rachis length of the first leaf.</li><li><code>stem_diameter_max</code>: The maximum stem diameter (m).</li><li><code>stem_diameter_slope</code>: The slope of the logistic function.</li><li><code>stem_diameter_inflection</code>: The inflection point of the logistic function.</li><li><code>stem_diameter_residual</code>: The residual of the stem diameter (m).</li><li><code>stem_diameter_snag</code>: The diameter estimation due to snags (m).</li></ul><p><strong>Optional arguments</strong></p><ul><li><code>rng</code>: The random number generator.</li></ul><p><strong>Details</strong></p><p>The stem diameter is computed using a logistic function, and then some variability is added to simulate natural variations that might occur in real-world scenarios.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/XPalm.jl/blob/16a455eacaf3eaa48002772d406ebabd309fd607/src/vpalm/allometries/stem.jl#L60-L81">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="XPalm.VPalm.stem_height-NTuple{6, Any}" href="#XPalm.VPalm.stem_height-NTuple{6, Any}"><code>XPalm.VPalm.stem_height</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">stem_height(nb_leaves_emitted, initial_stem_height, stem_height_coefficient, internode_length_at_maturity, stem_growth_start)</code></pre><p>Computes the stem height (m) at a given number of leaves emitted.</p><p><strong>Arguments</strong></p><ul><li><code>nb_leaves_emitted</code>: The number of leaves emitted from planting.</li><li><code>initial_stem_height</code>: The initial stem height at planting (m).</li><li><code>stem_height_coefficient</code>: The coefficient of the exponential function.</li><li><code>internode_length_at_maturity</code>: The internode length when the plant is mature (m).</li><li><code>stem_growth_start</code>: The number of leaves emitted at which the stem starts to grow (m). This is because the stem does not grow at the same rate at the beginning of the plant&#39;s life,</li></ul><p>because it first grows more in diameter than in height.</p><ul><li><code>stem_height_variation</code>: The variation of the stem height (m) due to the random draw from a normal distribution.</li></ul><p><strong>Optional arguments</strong></p><ul><li><code>rng</code>: The random number generator.</li></ul><p><strong>Details</strong></p><p>The stem height is computed using an exponential function for the first <code>stem_growth_start</code> leaves emitted, and then a linear function for the remaining leaves emitted.</p><p>Note that the stem height can also be subject to some variability using <code>stem_height_variation</code>, simulating natural variations that might occur in real-world scenarios, but this variability will never make the stem height go below 30% of the intial computed height.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/XPalm.jl/blob/16a455eacaf3eaa48002772d406ebabd309fd607/src/vpalm/allometries/stem.jl#L20-L45">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="XPalm.VPalm.unbend-Tuple{Any, Any}" href="#XPalm.VPalm.unbend-Tuple{Any, Any}"><code>XPalm.VPalm.unbend</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">unbend(distance, inclination)</code></pre><p>Removes torsion and bending of a bent beam by transforming it into a straight line, while preserving its insertion angle (inclination angle of the first segment).</p><p><strong>Arguments</strong></p><ul><li><code>distance</code>: Vector of distances between consecutive points (in meters)</li><li><code>inclination</code>: Vector of inclination angles (in degrees), only the first value is used</li></ul><p><strong>Returns</strong></p><ul><li>A vector of Meshes.Point objects representing the unbent positions</li></ul><p><strong>Details</strong></p><p>This function creates a straight line with the same cumulative length as the input distances, while maintaining the insertion angle specified by the first inclination value. The output points represent the unbent state of a curved structure.</p><p><strong>Note</strong></p><p>Mainly used to compute the input coordinates for <code>bend()</code> from experimental points.</p><p><strong>Example</strong></p><pre><code class="language-jl hljs">using VPalm, Unitful, Meshes
distances = [0.001, 1.340, 1.340, 0.770, 0.770]u&quot;m&quot;;
inclinations = [48.8, 48.8, 48.8, 48.8, 48.8];  # degrees
points = VPalm.unbend(distances, inclinations)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/XPalm.jl/blob/16a455eacaf3eaa48002772d406ebabd309fd607/src/vpalm/biomechanics/complete/unbend.jl#L1-L30">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="XPalm.VPalm.update_leaflet_angles!-Tuple{Any, Any}" href="#XPalm.VPalm.update_leaflet_angles!-Tuple{Any, Any}"><code>XPalm.VPalm.update_leaflet_angles!</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">update_leaflet_angles!(
    leaflet, leaf_rank; 
    last_rank_unfolding=2, unique_mtg_id=new_id(leaflet), 
    xm_intercept=0.176, xm_slope=0.08, 
    ym_intercept=0.51, ym_slope=-0.025
)</code></pre><p>Update the angles and stiffness of a leaflet based on its position, side, and leaf rank.</p><p><strong>Arguments</strong></p><ul><li><code>leaflet</code>: The leaflet node to update</li><li><code>leaf_rank</code>: The rank of the leaf (affects unfolding for young leaves)</li><li><code>last_rank_unfolding</code>: Rank at which leaflets are fully unfolded (default is 2)</li><li><code>unique_mtg_id</code>: Reference to the unique ID counter for MTG nodes (default is the maximum ID in the MTG)</li><li><code>xm_intercept</code>, <code>xm_slope</code>: Parameters for defining maximum leaflet width <strong>position</strong></li><li><code>ym_intercept</code>, <code>ym_slope</code>: Parameters for defining maximum leaflet width <strong>value</strong></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/XPalm.jl/blob/16a455eacaf3eaa48002772d406ebabd309fd607/src/vpalm/instance/leaflets.jl#L410-L429">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="XPalm.VPalm.update_petiole_angles!-Tuple{Any}" href="#XPalm.VPalm.update_petiole_angles!-Tuple{Any}"><code>XPalm.VPalm.update_petiole_angles!</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">update_petiole_angles!(petiole_node)</code></pre><p>Update the angles of the petiole segments based on the petiole node properties.</p><p><strong>Arguments</strong></p><ul><li><code>petiole_node</code>: the MTG Node of the petiole</li></ul><p><strong>Returns</strong></p><p>Nothing, the petiole node is updated in-place with its segments angles.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/XPalm.jl/blob/16a455eacaf3eaa48002772d406ebabd309fd607/src/vpalm/instance/petiole.jl#L73-L85">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="XPalm.VPalm.update_rachis_angles!-NTuple{8, Any}" href="#XPalm.VPalm.update_rachis_angles!-NTuple{8, Any}"><code>XPalm.VPalm.update_rachis_angles!</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">update_rachis_angles!(rachis_node, leaf_rank, rachis_length, height_cpoint, width_cpoint, zenithal_cpoint_angle, fresh_biomass, parameters; rng)</code></pre><p>Update the angles and dimensions of the rachis segments based on biomechanical properties. This function is called when the rachis exists already, but needs updating its angles and dimensions  following a change in the leaf rank, length, or fresh biomass.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/XPalm.jl/blob/16a455eacaf3eaa48002772d406ebabd309fd607/src/vpalm/instance/rachis.jl#L87-L93">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="XPalm.VPalm.update_segment_angles!-NTuple{5, Any}" href="#XPalm.VPalm.update_segment_angles!-NTuple{5, Any}"><code>XPalm.VPalm.update_segment_angles!</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">update_segment_angles!(leaflet, young_modulus, initial_angle, leaflet_length, tapering)</code></pre><p>Update the zenithal angles of each segment in a leaflet based on the Young&#39;s modulus model.</p><p><strong>Arguments</strong></p><ul><li><code>leaflet</code>: The leaflet MTG node containing segments</li><li><code>young_modulus</code>: Value of Young&#39;s modulus</li><li><code>initial_angle</code>: Initial angle from vertical in radians</li><li><code>leaflet_length</code>: Total length of the leaflet</li><li><code>tapering</code>: Tapering factor</li></ul><p><strong>Returns</strong></p><ul><li>Nothing (the angles are updated in place)</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/XPalm.jl/blob/16a455eacaf3eaa48002772d406ebabd309fd607/src/vpalm/biomechanics/simplified/young_modulus.jl#L147-L162">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="XPalm.VPalm.width_at_cpoint-Tuple{Any, Any, Any}" href="#XPalm.VPalm.width_at_cpoint-Tuple{Any, Any, Any}"><code>XPalm.VPalm.width_at_cpoint</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">width_at_cpoint(rachis_length, cpoint_width_intercept, cpoint_width_slope)</code></pre><p>Compute width at C point based on rachis length.</p><p><strong>Arguments</strong></p><ul><li><code>rachis_length</code>: Length of rachis (m)</li><li><code>cpoint_width_intercept</code>: Intercept of linear function (m)</li><li><code>cpoint_width_slope</code>: Slope of linear function</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/XPalm.jl/blob/16a455eacaf3eaa48002772d406ebabd309fd607/src/vpalm/allometries/petiole.jl#L66-L76">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="XPalm.VPalm.write_parameters-Tuple{Any, Any}" href="#XPalm.VPalm.write_parameters-Tuple{Any, Any}"><code>XPalm.VPalm.write_parameters</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">write_parameters(file, params)</code></pre><p>Write the given parameters to a file using YAML format.</p><p><strong>Arguments</strong></p><ul><li><code>file</code>: The file path to write the parameters to.</li><li><code>params</code>: The parameters to be written.</li></ul><p><strong>Example</strong></p><pre><code class="language-julia hljs">file = joinpath(dirname(dirname(pathof(VPalm))),&quot;test&quot;,&quot;files&quot;,&quot;parameter_file.yml&quot;)
params = read_parameters(file)
write_parameters(tempname(), params)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/XPalm.jl/blob/16a455eacaf3eaa48002772d406ebabd309fd607/src/vpalm/IO/parameters_IO.jl#L106-L122">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="XPalm.VPalm.xyz_to_dist_and_angles-Union{Tuple{AbstractVector{P}}, Tuple{P}} where P&lt;:Meshes.Point" href="#XPalm.VPalm.xyz_to_dist_and_angles-Union{Tuple{AbstractVector{P}}, Tuple{P}} where P&lt;:Meshes.Point"><code>XPalm.VPalm.xyz_to_dist_and_angles</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">xyz_to_dist_and_angles(points)</code></pre><p>Compute segment lengths and angles from point coordinates.</p><p><strong>Arguments</strong></p><ul><li><code>points</code>: A vector of <code>Meshes.Points</code>.</li></ul><p><strong>Returns</strong></p><ul><li>A NamedTuple with fields:<ul><li><code>dist_p2p1</code>: Vector of segment lengths (m).</li><li><code>vangle_xy</code>: Vector of angles between the segment and the XY plane (radians).</li><li><code>vangle_xz</code>: Vector of angles between the segment and the XZ plane (radians).</li></ul></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/XPalm.jl/blob/16a455eacaf3eaa48002772d406ebabd309fd607/src/vpalm/biomechanics/complete/xyz_dist_angles.jl#L1-L16">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="XPalm.VPalm.@check_unit" href="#XPalm.VPalm.@check_unit"><code>XPalm.VPalm.@check_unit</code></a> — <span class="docstring-category">Macro</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">@check_unit(variable, expected_unit, [verbose=true])</code></pre><p>Check if a variable has the expected unit type. If no unit is found, assign the expected unit. If a different unit is found, try to convert to the expected unit.</p><p><strong>Arguments</strong></p><ul><li><code>variable</code>: The variable to check</li><li><code>expected_unit</code>: The expected unit (e.g., u&quot;m&quot;)</li><li><code>verbose</code>: Whether to show warnings (default: true)</li></ul><p><strong>Examples</strong></p><p>```julia rachis<em>length = 10 @check</em>unit rachis_length u&quot;m&quot;  # Will add u&quot;m&quot; and warn</p><p>petiole<em>length = 10 @check</em>unit petiole_length u&quot;m&quot; false # Will add u&quot;m&quot; without a warning</p><p>mass = 5.0u&quot;g&quot; @check_unit mass u&quot;kg&quot;   # Will convert g to kg</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/XPalm.jl/blob/16a455eacaf3eaa48002772d406ebabd309fd607/src/vpalm/units.jl#L1-L24">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../../api/">« XPalm API</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.13.0 on <span class="colophon-date" title="Thursday 10 July 2025 15:24">Thursday 10 July 2025</span>. Using Julia version 1.11.5.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
